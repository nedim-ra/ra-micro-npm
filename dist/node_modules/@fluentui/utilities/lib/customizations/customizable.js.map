{"version":3,"file":"customizable.js","sources":["../../../../../../node_modules/@fluentui/utilities/lib/customizations/customizable.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { Customizations } from './Customizations';\nimport { hoistStatics } from '../hoistStatics';\nimport { CustomizerContext } from './CustomizerContext';\nimport { concatStyleSets, makeShadowConfig } from '@fluentui/merge-styles';\nimport { MergeStylesShadowRootConsumer } from '../shadowDom/contexts/MergeStylesShadowRootConsumer';\nimport { getWindow } from '../dom/getWindow';\nimport { WindowContext } from '@fluentui/react-window-provider';\nimport { memoizeFunction } from '../memoize';\nvar memoizedMakeShadowConfig = memoizeFunction(makeShadowConfig);\nvar mergeComponentStyles = memoizeFunction(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction (defaultStyles, componentStyles, shadowConfig) {\n    return __assign(__assign(__assign({}, defaultStyles), componentStyles), { __shadowConfig__: shadowConfig });\n});\nexport function customizable(scope, fields, concatStyles) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function customizableFactory(ComposedComponent) {\n        var _a;\n        var resultClass = (_a = /** @class */ (function (_super) {\n                __extends(ComponentWithInjectedProps, _super);\n                function ComponentWithInjectedProps(props) {\n                    var _this = _super.call(this, props) || this;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    _this._styleCache = {};\n                    _this._onSettingChanged = _this._onSettingChanged.bind(_this);\n                    return _this;\n                }\n                ComponentWithInjectedProps.prototype.componentDidMount = function () {\n                    Customizations.observe(this._onSettingChanged);\n                };\n                ComponentWithInjectedProps.prototype.componentWillUnmount = function () {\n                    Customizations.unobserve(this._onSettingChanged);\n                };\n                ComponentWithInjectedProps.prototype.render = function () {\n                    var _this = this;\n                    return (React.createElement(MergeStylesShadowRootConsumer, { stylesheetKey: scope }, function (inShadow) {\n                        return (React.createElement(CustomizerContext.Consumer, null, function (context) {\n                            var _a;\n                            var defaultProps = Customizations.getSettings(fields, scope, context.customizations);\n                            var win = (_a = _this.context.window) !== null && _a !== void 0 ? _a : getWindow();\n                            var shadowConfig = memoizedMakeShadowConfig(scope, inShadow, win);\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var componentProps = _this.props;\n                            // If defaultProps.styles is a function, evaluate it before calling concatStyleSets\n                            if (defaultProps.styles && typeof defaultProps.styles === 'function') {\n                                defaultProps.styles = defaultProps.styles(__assign(__assign({}, defaultProps), componentProps));\n                            }\n                            // If concatStyles is true and custom styles have been defined compute those styles\n                            if (concatStyles && defaultProps.styles) {\n                                if (_this._styleCache.default !== defaultProps.styles ||\n                                    _this._styleCache.component !== componentProps.styles) {\n                                    var mergedStyles = concatStyleSets(defaultProps.styles, componentProps.styles);\n                                    mergedStyles.__shadowConfig__ = shadowConfig;\n                                    _this._styleCache.default = defaultProps.styles;\n                                    _this._styleCache.component = componentProps.styles;\n                                    _this._styleCache.merged = mergedStyles;\n                                }\n                                return (React.createElement(ComposedComponent, __assign({}, defaultProps, componentProps, { styles: _this._styleCache.merged })));\n                            }\n                            var styles = mergeComponentStyles(defaultProps.styles, componentProps.styles, shadowConfig);\n                            return React.createElement(ComposedComponent, __assign({}, defaultProps, componentProps, { styles: styles }));\n                        }));\n                    }));\n                };\n                ComponentWithInjectedProps.prototype._onSettingChanged = function () {\n                    this.forceUpdate();\n                };\n                return ComponentWithInjectedProps;\n            }(React.Component)),\n            _a.displayName = 'Customized' + scope,\n            _a.contextType = WindowContext,\n            _a);\n        return hoistStatics(ComposedComponent, resultClass);\n    };\n}\n//# sourceMappingURL=customizable.js.map"],"names":["memoizedMakeShadowConfig","memoizeFunction","makeShadowConfig","mergeComponentStyles","defaultStyles","componentStyles","shadowConfig","__assign","customizable","scope","fields","concatStyles","ComposedComponent","_a","resultClass","_super","__extends","ComponentWithInjectedProps","props","_this","Customizations","React","MergeStylesShadowRootConsumer","inShadow","CustomizerContext","context","defaultProps","win","getWindow","componentProps","mergedStyles","concatStyleSets","styles","WindowContext","hoistStatics"],"mappings":";;;;;;;;;;;AAUA,IAAIA,IAA2B,gBAAAC,EAAgBC,CAAgB,GAC3DC,IAAuB,gBAAAF;AAAA;AAAA,EAE3B,SAAUG,GAAeC,GAAiBC,GAAc;AACpD,WAAOC,EAASA,EAASA,EAAS,IAAIH,CAAa,GAAGC,CAAe,GAAG,EAAE,kBAAkBC,EAAc,CAAA;AAAA,EAC9G;AAAC;AACM,SAASE,EAAaC,GAAOC,GAAQC,GAAc;AAEtD,SAAO,SAA6BC,GAAmB;AACnD,QAAIC,GACAC,KAAeD;AAAA,IAAoB,SAAUE,GAAQ;AACjD,MAAAC,EAAUC,GAA4BF,CAAM;AAC5C,eAASE,EAA2BC,GAAO;AACvC,YAAIC,IAAQJ,EAAO,KAAK,MAAMG,CAAK,KAAK;AAExC,eAAAC,EAAM,cAAc,IACpBA,EAAM,oBAAoBA,EAAM,kBAAkB,KAAKA,CAAK,GACrDA;AAAA,MACV;AACD,aAAAF,EAA2B,UAAU,oBAAoB,WAAY;AACjE,QAAAG,EAAe,QAAQ,KAAK,iBAAiB;AAAA,MACjE,GACgBH,EAA2B,UAAU,uBAAuB,WAAY;AACpE,QAAAG,EAAe,UAAU,KAAK,iBAAiB;AAAA,MACnE,GACgBH,EAA2B,UAAU,SAAS,WAAY;AACtD,YAAIE,IAAQ;AACZ,eAAQE,EAAM,cAAcC,GAA+B,EAAE,eAAeb,EAAK,GAAI,SAAUc,GAAU;AACrG,iBAAQF,EAAM,cAAcG,EAAkB,UAAU,MAAM,SAAUC,GAAS;AAC7E,gBAAIZ,GACAa,IAAeN,EAAe,YAAYV,GAAQD,GAAOgB,EAAQ,cAAc,GAC/EE,KAAOd,IAAKM,EAAM,QAAQ,YAAY,QAAQN,MAAO,SAASA,IAAKe,EAAS,GAC5EtB,IAAeN,EAAyBS,GAAOc,GAAUI,CAAG,GAE5DE,IAAiBV,EAAM;AAM3B,gBAJIO,EAAa,UAAU,OAAOA,EAAa,UAAW,eACtDA,EAAa,SAASA,EAAa,OAAOnB,EAASA,EAAS,CAAA,GAAImB,CAAY,GAAGG,CAAc,CAAC,IAG9EH,EAAa,QAAQ;AACrC,kBAAIP,EAAM,YAAY,YAAYO,EAAa,UAC3CP,EAAM,YAAY,cAAcU,EAAe,QAAQ;AACvD,oBAAIC,IAAeC,EAAgBL,EAAa,QAAQG,EAAe,MAAM;AAC7E,gBAAAC,EAAa,mBAAmBxB,GAChCa,EAAM,YAAY,UAAUO,EAAa,QACzCP,EAAM,YAAY,YAAYU,EAAe,QAC7CV,EAAM,YAAY,SAASW;AAAA,cAC9B;AACD,qBAAQT,EAAM,cAAcT,GAAmBL,EAAS,CAAE,GAAEmB,GAAcG,GAAgB,EAAE,QAAQV,EAAM,YAAY,OAAM,CAAE,CAAC;AAAA,YAClI;AACD,gBAAIa,IAAS7B,EAAqBuB,EAAa,QAAQG,EAAe,QAAQvB,CAAY;AAC1F,mBAAOe,EAAM,cAAcT,GAAmBL,EAAS,CAAE,GAAEmB,GAAcG,GAAgB,EAAE,QAAQG,EAAM,CAAE,CAAC;AAAA,UACxI,CAAyB;AAAA,QACzB,CAAqB;AAAA,MACrB,GACgBf,EAA2B,UAAU,oBAAoB,WAAY;AACjE,aAAK,YAAW;AAAA,MACpC,GACuBA;AAAA,IACvB,EAAcI,EAAM,SAAS,GACjBR,EAAG,cAAc,eAAeJ,GAChCI,EAAG,cAAcoB,GACjBpB;AACJ,WAAOqB,EAAatB,GAAmBE,CAAW;AAAA,EAC1D;AACA;","x_google_ignoreList":[0]}