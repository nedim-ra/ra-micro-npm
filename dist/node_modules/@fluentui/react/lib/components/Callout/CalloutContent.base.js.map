{"version":3,"file":"CalloutContent.base.js","sources":["../../../../../../../node_modules/@fluentui/react/lib/components/Callout/CalloutContent.base.js"],"sourcesContent":["var _a;\nimport { __assign } from \"tslib\";\nimport * as React from 'react';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { css, divProperties, elementContains, focusFirstChild, getNativeProps, on, shallowCompare, getPropsWithDefaults, } from '../../Utilities';\nimport { calculateGapSpace, getRectangleFromTarget } from '../../utilities/positioning/positioning';\nimport { positionCallout, RectangleEdge, positionCard, getBoundsFromTargetWindow } from '../../Positioning';\nimport { Popup } from '../../Popup';\nimport { classNamesFunction } from '../../Utilities';\nimport { AnimationClassNames } from '../../Styling';\nimport { useMergedRefs, useAsync, useConst, useTarget, useOnEvent } from '@fluentui/react-hooks';\nimport { useWindowEx } from '../../utilities/dom';\nvar COMPONENT_NAME = 'CalloutContentBase';\nvar ANIMATIONS = (_a = {},\n    _a[RectangleEdge.top] = AnimationClassNames.slideUpIn10,\n    _a[RectangleEdge.bottom] = AnimationClassNames.slideDownIn10,\n    _a[RectangleEdge.left] = AnimationClassNames.slideLeftIn10,\n    _a[RectangleEdge.right] = AnimationClassNames.slideRightIn10,\n    _a);\nvar BEAK_ORIGIN_POSITION = { top: 0, left: 0 };\n// Microsoft Edge will overwrite inline styles if there is an animation pertaining to that style.\n// To help ensure that edge will respect the offscreen style opacity\n// filter needs to be added as an additional way to set opacity.\n// Also set pointer-events: none so that the callout will not occlude the element it is\n// going to be positioned against\nvar OFF_SCREEN_STYLE = {\n    opacity: 0,\n    filter: 'opacity(0)',\n    pointerEvents: 'none',\n};\n// role and role description go hand-in-hand. Both would be included by spreading getNativeProps for a basic element\n// This constant array can be used to filter these out of native props spread on callout root and apply them together on\n// calloutMain (the Popup component within the callout)\nvar ARIA_ROLE_ATTRIBUTES = ['role', 'aria-roledescription'];\nvar DEFAULT_PROPS = {\n    preventDismissOnLostFocus: false,\n    preventDismissOnScroll: false,\n    preventDismissOnResize: false,\n    isBeakVisible: true,\n    beakWidth: 16,\n    gapSpace: 0,\n    minPagePadding: 8,\n    directionalHint: DirectionalHint.bottomAutoEdge,\n};\nvar getClassNames = classNamesFunction({\n    disableCaching: true, // disabling caching because stylesProp.position mutates often\n});\n/**\n * (Hook) to return a function to lazily fetch the bounds of the target element for the callout.\n */\nfunction useBounds(_a, targetRef, targetWindow) {\n    var bounds = _a.bounds, _b = _a.minPagePadding, minPagePadding = _b === void 0 ? DEFAULT_PROPS.minPagePadding : _b, target = _a.target;\n    var _c = React.useState(false), targetWindowResized = _c[0], setTargetWindowResized = _c[1];\n    var cachedBounds = React.useRef();\n    var getBounds = React.useCallback(function () {\n        if (!cachedBounds.current || targetWindowResized) {\n            var currentBounds = typeof bounds === 'function' ? (targetWindow ? bounds(target, targetWindow) : undefined) : bounds;\n            if (!currentBounds && targetWindow) {\n                currentBounds = getBoundsFromTargetWindow(targetRef.current, targetWindow);\n                currentBounds = {\n                    top: currentBounds.top + minPagePadding,\n                    left: currentBounds.left + minPagePadding,\n                    right: currentBounds.right - minPagePadding,\n                    bottom: currentBounds.bottom - minPagePadding,\n                    width: currentBounds.width - minPagePadding * 2,\n                    height: currentBounds.height - minPagePadding * 2,\n                };\n            }\n            cachedBounds.current = currentBounds;\n            targetWindowResized && setTargetWindowResized(false);\n        }\n        return cachedBounds.current;\n    }, [bounds, minPagePadding, target, targetRef, targetWindow, targetWindowResized]);\n    var async = useAsync();\n    useOnEvent(targetWindow, 'resize', async.debounce(function () {\n        setTargetWindowResized(true);\n    }, 500, { leading: true }));\n    return getBounds;\n}\n/**\n * (Hook) to return the maximum available height for the Callout to render into.\n */\nfunction useMaxHeight(_a, getBounds, targetRef, positions) {\n    var _b;\n    var calloutMaxHeight = _a.calloutMaxHeight, finalHeight = _a.finalHeight, directionalHint = _a.directionalHint, directionalHintFixed = _a.directionalHintFixed, hidden = _a.hidden, gapSpace = _a.gapSpace, beakWidth = _a.beakWidth, isBeakVisible = _a.isBeakVisible, coverTarget = _a.coverTarget;\n    var _c = React.useState(), maxHeight = _c[0], setMaxHeight = _c[1];\n    var _d = (_b = positions === null || positions === void 0 ? void 0 : positions.elementPosition) !== null && _b !== void 0 ? _b : {}, top = _d.top, bottom = _d.bottom;\n    var targetRect = (targetRef === null || targetRef === void 0 ? void 0 : targetRef.current) ? getRectangleFromTarget(targetRef.current) : undefined;\n    React.useEffect(function () {\n        var _a;\n        var bounds = (_a = getBounds()) !== null && _a !== void 0 ? _a : {};\n        var topBounds = bounds.top;\n        var bottomBounds = bounds.bottom;\n        var calculatedHeight;\n        // If aligned to top edge of target and not covering target, update bottom bounds to the\n        // top of the target (accounting for gap space and beak)\n        if ((positions === null || positions === void 0 ? void 0 : positions.targetEdge) === RectangleEdge.top && (targetRect === null || targetRect === void 0 ? void 0 : targetRect.top) && !coverTarget) {\n            bottomBounds = targetRect.top - calculateGapSpace(isBeakVisible, beakWidth, gapSpace);\n        }\n        if (typeof top === 'number' && bottomBounds) {\n            calculatedHeight = bottomBounds - top;\n        }\n        else if (typeof bottom === 'number' && typeof topBounds === 'number' && bottomBounds) {\n            calculatedHeight = bottomBounds - topBounds - bottom;\n        }\n        if ((!calloutMaxHeight && !hidden) ||\n            (calloutMaxHeight && calculatedHeight && calloutMaxHeight > calculatedHeight)) {\n            setMaxHeight(calculatedHeight);\n        }\n        else if (calloutMaxHeight) {\n            setMaxHeight(calloutMaxHeight);\n        }\n        else {\n            setMaxHeight(undefined);\n        }\n    }, [\n        bottom,\n        calloutMaxHeight,\n        finalHeight,\n        directionalHint,\n        directionalHintFixed,\n        getBounds,\n        hidden,\n        positions,\n        top,\n        gapSpace,\n        beakWidth,\n        isBeakVisible,\n        targetRect,\n        coverTarget,\n    ]);\n    return maxHeight;\n}\n/**\n * (Hook) to find the current position of Callout. If Callout is resized then a new position is calculated.\n */\nfunction usePositions(props, hostElement, calloutElement, targetRef, getBounds, popupRef) {\n    var _a = React.useState(), positions = _a[0], setPositions = _a[1];\n    var positionAttempts = React.useRef(0);\n    var previousTarget = React.useRef();\n    var async = useAsync();\n    var hidden = props.hidden, target = props.target, finalHeight = props.finalHeight, calloutMaxHeight = props.calloutMaxHeight, onPositioned = props.onPositioned, directionalHint = props.directionalHint, hideOverflow = props.hideOverflow, preferScrollResizePositioning = props.preferScrollResizePositioning;\n    var win = useWindowEx();\n    var localRef = React.useRef();\n    var popupStyles;\n    if (localRef.current !== popupRef.current) {\n        localRef.current = popupRef.current;\n        popupStyles = popupRef.current ? win === null || win === void 0 ? void 0 : win.getComputedStyle(popupRef.current) : undefined;\n    }\n    var popupOverflowY = popupStyles === null || popupStyles === void 0 ? void 0 : popupStyles.overflowY;\n    React.useEffect(function () {\n        if (!hidden) {\n            var timerId_1 = async.requestAnimationFrame(function () {\n                var _a, _b;\n                if (hostElement.current && calloutElement) {\n                    var currentProps = __assign(__assign({}, props), { target: targetRef.current, bounds: getBounds() });\n                    // duplicate calloutElement & remove useMaxHeight's maxHeight for position calc\n                    var dupeCalloutElement = calloutElement.cloneNode(true);\n                    dupeCalloutElement.style.maxHeight = calloutMaxHeight ? \"\".concat(calloutMaxHeight) : '';\n                    dupeCalloutElement.style.visibility = 'hidden';\n                    (_a = calloutElement.parentElement) === null || _a === void 0 ? void 0 : _a.appendChild(dupeCalloutElement);\n                    var previousPositions = previousTarget.current === target ? positions : undefined;\n                    // only account for scroll resizing if styles allow callout to scroll\n                    // (popup styles determine if callout will scroll)\n                    var isOverflowYHidden = hideOverflow || popupOverflowY === 'clip' || popupOverflowY === 'hidden';\n                    var shouldScroll = preferScrollResizePositioning && !isOverflowYHidden;\n                    // If there is a finalHeight given then we assume that the user knows and will handle\n                    // additional positioning adjustments so we should call positionCard\n                    var newPositions = finalHeight\n                        ? positionCard(currentProps, hostElement.current, dupeCalloutElement, previousPositions, win)\n                        : positionCallout(currentProps, hostElement.current, dupeCalloutElement, previousPositions, shouldScroll, undefined, win);\n                    // clean up duplicate calloutElement\n                    (_b = calloutElement.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(dupeCalloutElement);\n                    // Set the new position only when the positions do not exist or one of the new callout positions\n                    // is different. The position should not change if the position is within 2 decimal places.\n                    if ((!positions && newPositions) ||\n                        (positions && newPositions && !arePositionsEqual(positions, newPositions) && positionAttempts.current < 5)) {\n                        // We should not reposition the callout more than a few times, if it is then the content is likely resizing\n                        // and we should stop trying to reposition to prevent a stack overflow.\n                        positionAttempts.current++;\n                        setPositions(newPositions);\n                    }\n                    else if (positionAttempts.current > 0) {\n                        // Only call the onPositioned callback if the callout has been re-positioned at least once.\n                        positionAttempts.current = 0;\n                        onPositioned === null || onPositioned === void 0 ? void 0 : onPositioned(positions);\n                    }\n                }\n            }, calloutElement);\n            previousTarget.current = target;\n            return function () {\n                async.cancelAnimationFrame(timerId_1);\n                previousTarget.current = undefined;\n            };\n        }\n        else {\n            // When the callout is hidden, clear position state so that it is not accidentally used next render.\n            setPositions(undefined);\n            positionAttempts.current = 0;\n        }\n    }, [\n        hidden,\n        directionalHint,\n        async,\n        calloutElement,\n        calloutMaxHeight,\n        hostElement,\n        targetRef,\n        finalHeight,\n        getBounds,\n        onPositioned,\n        positions,\n        props,\n        target,\n        hideOverflow,\n        preferScrollResizePositioning,\n        popupOverflowY,\n        win,\n    ]);\n    return positions;\n}\n/**\n * (Hook) to set up behavior to automatically focus the callout when it appears, if indicated by props.\n */\nfunction useAutoFocus(_a, positions, calloutElement) {\n    var hidden = _a.hidden, setInitialFocus = _a.setInitialFocus;\n    var async = useAsync();\n    var hasPositions = !!positions;\n    React.useEffect(function () {\n        if (!hidden && setInitialFocus && hasPositions && calloutElement) {\n            var timerId_2 = async.requestAnimationFrame(function () { return focusFirstChild(calloutElement); }, calloutElement);\n            return function () { return async.cancelAnimationFrame(timerId_2); };\n        }\n    }, [hidden, hasPositions, async, calloutElement, setInitialFocus]);\n}\n/**\n * (Hook) to set up various handlers to dismiss the popup when it loses focus or the window scrolls or similar cases.\n */\nfunction useDismissHandlers(_a, positions, hostElement, targetRef, targetWindow) {\n    var hidden = _a.hidden, onDismiss = _a.onDismiss, \n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnScroll = _a.preventDismissOnScroll, \n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnResize = _a.preventDismissOnResize, \n    // eslint-disable-next-line deprecation/deprecation\n    preventDismissOnLostFocus = _a.preventDismissOnLostFocus, dismissOnTargetClick = _a.dismissOnTargetClick, shouldDismissOnWindowFocus = _a.shouldDismissOnWindowFocus, preventDismissOnEvent = _a.preventDismissOnEvent;\n    var isMouseDownOnPopup = React.useRef(false);\n    var async = useAsync();\n    var mouseDownHandlers = useConst([\n        function () {\n            isMouseDownOnPopup.current = true;\n        },\n        function () {\n            isMouseDownOnPopup.current = false;\n        },\n    ]);\n    var positionsExists = !!positions;\n    React.useEffect(function () {\n        var dismissOnScroll = function (ev) {\n            if (positionsExists && !preventDismissOnScroll) {\n                dismissOnClickOrScroll(ev);\n            }\n        };\n        var dismissOnResize = function (ev) {\n            if (!preventDismissOnResize && !(preventDismissOnEvent && preventDismissOnEvent(ev))) {\n                onDismiss === null || onDismiss === void 0 ? void 0 : onDismiss(ev);\n            }\n        };\n        var dismissOnLostFocus = function (ev) {\n            if (!preventDismissOnLostFocus) {\n                dismissOnClickOrScroll(ev);\n            }\n        };\n        var dismissOnClickOrScroll = function (ev) {\n            var eventPaths = ev.composedPath ? ev.composedPath() : [];\n            var target = eventPaths.length > 0 ? eventPaths[0] : ev.target;\n            var isEventTargetOutsideCallout = hostElement.current && !elementContains(hostElement.current, target);\n            // If mouse is pressed down on callout but moved outside then released, don't dismiss the callout.\n            if (isEventTargetOutsideCallout && isMouseDownOnPopup.current) {\n                isMouseDownOnPopup.current = false;\n                return;\n            }\n            if ((!targetRef.current && isEventTargetOutsideCallout) ||\n                (ev.target !== targetWindow &&\n                    isEventTargetOutsideCallout &&\n                    (!targetRef.current ||\n                        'stopPropagation' in targetRef.current ||\n                        dismissOnTargetClick ||\n                        (target !== targetRef.current && !elementContains(targetRef.current, target))))) {\n                if (preventDismissOnEvent && preventDismissOnEvent(ev)) {\n                    return;\n                }\n                onDismiss === null || onDismiss === void 0 ? void 0 : onDismiss(ev);\n            }\n        };\n        var dismissOnTargetWindowBlur = function (ev) {\n            // Do nothing\n            if (!shouldDismissOnWindowFocus) {\n                return;\n            }\n            if (((preventDismissOnEvent && !preventDismissOnEvent(ev)) ||\n                (!preventDismissOnEvent && !preventDismissOnLostFocus)) &&\n                !(targetWindow === null || targetWindow === void 0 ? void 0 : targetWindow.document.hasFocus()) &&\n                ev.relatedTarget === null) {\n                onDismiss === null || onDismiss === void 0 ? void 0 : onDismiss(ev);\n            }\n        };\n        // This is added so the callout will dismiss when the window is scrolled\n        // but not when something inside the callout is scrolled. The delay seems\n        // to be required to avoid React firing an async focus event in IE from\n        // the target changing focus quickly prior to rendering the callout.\n        var disposablesPromise = new Promise(function (resolve) {\n            async.setTimeout(function () {\n                if (!hidden && targetWindow) {\n                    var disposables_1 = [\n                        on(targetWindow, 'scroll', dismissOnScroll, true),\n                        on(targetWindow, 'resize', dismissOnResize, true),\n                        on(targetWindow.document.documentElement, 'focus', dismissOnLostFocus, true),\n                        on(targetWindow.document.documentElement, 'click', dismissOnLostFocus, true),\n                        on(targetWindow, 'blur', dismissOnTargetWindowBlur, true),\n                    ];\n                    resolve(function () {\n                        disposables_1.forEach(function (dispose) { return dispose(); });\n                    });\n                }\n            }, 0);\n        });\n        return function () {\n            disposablesPromise.then(function (dispose) { return dispose(); });\n        };\n    }, [\n        hidden,\n        async,\n        hostElement,\n        targetRef,\n        targetWindow,\n        onDismiss,\n        shouldDismissOnWindowFocus,\n        dismissOnTargetClick,\n        preventDismissOnLostFocus,\n        preventDismissOnResize,\n        preventDismissOnScroll,\n        positionsExists,\n        preventDismissOnEvent,\n    ]);\n    return mouseDownHandlers;\n}\nexport var CalloutContentBase = React.memo(React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n    var props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n    var styles = props.styles, style = props.style, ariaLabel = props.ariaLabel, ariaDescribedBy = props.ariaDescribedBy, ariaLabelledBy = props.ariaLabelledBy, className = props.className, isBeakVisible = props.isBeakVisible, children = props.children, beakWidth = props.beakWidth, calloutWidth = props.calloutWidth, calloutMaxWidth = props.calloutMaxWidth, calloutMinWidth = props.calloutMinWidth, doNotLayer = props.doNotLayer, finalHeight = props.finalHeight, _a = props.hideOverflow, hideOverflow = _a === void 0 ? !!finalHeight : _a, backgroundColor = props.backgroundColor, calloutMaxHeight = props.calloutMaxHeight, onScroll = props.onScroll, \n    // eslint-disable-next-line deprecation/deprecation\n    _b = props.shouldRestoreFocus, \n    // eslint-disable-next-line deprecation/deprecation\n    shouldRestoreFocus = _b === void 0 ? true : _b, target = props.target, hidden = props.hidden, onLayerMounted = props.onLayerMounted, popupProps = props.popupProps;\n    var hostElement = React.useRef(null);\n    var popupRef = React.useRef(null);\n    var mergedPopupRefs = useMergedRefs(popupRef, popupProps === null || popupProps === void 0 ? void 0 : popupProps.ref);\n    var _c = React.useState(null), calloutElement = _c[0], setCalloutElement = _c[1];\n    var calloutCallback = React.useCallback(function (calloutEl) {\n        setCalloutElement(calloutEl);\n    }, []);\n    var rootRef = useMergedRefs(hostElement, forwardedRef);\n    var _d = useTarget(props.target, {\n        current: calloutElement,\n    }), targetRef = _d[0], targetWindow = _d[1];\n    var getBounds = useBounds(props, targetRef, targetWindow);\n    var positions = usePositions(props, hostElement, calloutElement, targetRef, getBounds, mergedPopupRefs);\n    var maxHeight = useMaxHeight(props, getBounds, targetRef, positions);\n    var _e = useDismissHandlers(props, positions, hostElement, targetRef, targetWindow), mouseDownOnPopup = _e[0], mouseUpOnPopup = _e[1];\n    // do not set both top and bottom css props from positions\n    // instead, use maxHeight\n    var isForcedInBounds = (positions === null || positions === void 0 ? void 0 : positions.elementPosition.top) && (positions === null || positions === void 0 ? void 0 : positions.elementPosition.bottom);\n    var cssPositions = __assign(__assign({}, positions === null || positions === void 0 ? void 0 : positions.elementPosition), { maxHeight: maxHeight });\n    if (isForcedInBounds) {\n        cssPositions.bottom = undefined;\n    }\n    useAutoFocus(props, positions, calloutElement);\n    React.useEffect(function () {\n        if (!hidden) {\n            onLayerMounted === null || onLayerMounted === void 0 ? void 0 : onLayerMounted();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run if hidden changes\n    }, [hidden]);\n    // If there is no target window then we are likely in server side rendering and we should not render anything.\n    if (!targetWindow) {\n        return null;\n    }\n    var overflowYHidden = hideOverflow;\n    var beakVisible = isBeakVisible && !!target;\n    var classNames = getClassNames(styles, {\n        theme: props.theme,\n        className: className,\n        overflowYHidden: overflowYHidden,\n        calloutWidth: calloutWidth,\n        positions: positions,\n        beakWidth: beakWidth,\n        backgroundColor: backgroundColor,\n        calloutMaxWidth: calloutMaxWidth,\n        calloutMinWidth: calloutMinWidth,\n        doNotLayer: doNotLayer,\n    });\n    var overflowStyle = __assign(__assign({ maxHeight: calloutMaxHeight ? calloutMaxHeight : '100%' }, style), (overflowYHidden && { overflowY: 'hidden' }));\n    var visibilityStyle = props.hidden ? { visibility: 'hidden' } : undefined;\n    // React.CSSProperties does not understand IRawStyle, so the inline animations will need to be cast as any for now.\n    return (React.createElement(\"div\", { ref: rootRef, className: classNames.container, style: visibilityStyle },\n        React.createElement(\"div\", __assign({}, getNativeProps(props, divProperties, ARIA_ROLE_ATTRIBUTES), { className: css(classNames.root, positions && positions.targetEdge && ANIMATIONS[positions.targetEdge]), style: positions ? __assign({}, cssPositions) : OFF_SCREEN_STYLE, \n            // Safari and Firefox on Mac OS requires this to back-stop click events so focus remains in the Callout.\n            // See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n            tabIndex: -1, ref: calloutCallback }),\n            beakVisible && React.createElement(\"div\", { className: classNames.beak, style: getBeakPosition(positions) }),\n            beakVisible && React.createElement(\"div\", { className: classNames.beakCurtain }),\n            React.createElement(Popup\n            // don't use getNativeElementProps for role and roledescription because it will also\n            // pass through data-* props (resulting in them being used in two places)\n            , __assign({ \n                // don't use getNativeElementProps for role and roledescription because it will also\n                // pass through data-* props (resulting in them being used in two places)\n                role: props.role, \"aria-roledescription\": props['aria-roledescription'], ariaDescribedBy: ariaDescribedBy, ariaLabel: ariaLabel, ariaLabelledBy: ariaLabelledBy, className: classNames.calloutMain, onDismiss: props.onDismiss, onMouseDown: mouseDownOnPopup, onMouseUp: mouseUpOnPopup, onRestoreFocus: props.onRestoreFocus, onScroll: onScroll, shouldRestoreFocus: shouldRestoreFocus, style: overflowStyle }, popupProps, { ref: mergedPopupRefs }), children))));\n}), function (previousProps, nextProps) {\n    if (!nextProps.shouldUpdateWhenHidden && previousProps.hidden && nextProps.hidden) {\n        // Do not update when hidden.\n        return true;\n    }\n    return shallowCompare(previousProps, nextProps);\n});\n/**\n * (Utility) to find and return the current `Callout` Beak position.\n *\n * @param positions\n */\nfunction getBeakPosition(positions) {\n    var _a, _b;\n    var beakPositionStyle = __assign(__assign({}, (_a = positions === null || positions === void 0 ? void 0 : positions.beakPosition) === null || _a === void 0 ? void 0 : _a.elementPosition), { display: ((_b = positions === null || positions === void 0 ? void 0 : positions.beakPosition) === null || _b === void 0 ? void 0 : _b.hideBeak) ? 'none' : undefined });\n    if (!beakPositionStyle.top && !beakPositionStyle.bottom && !beakPositionStyle.left && !beakPositionStyle.right) {\n        beakPositionStyle.left = BEAK_ORIGIN_POSITION.left;\n        beakPositionStyle.top = BEAK_ORIGIN_POSITION.top;\n    }\n    return beakPositionStyle;\n}\n/**\n * (Utility) used to compare two different elementPositions to determine whether they are equal.\n *\n * @param prevElementPositions\n * @param newElementPosition\n */\nfunction arePositionsEqual(prevElementPositions, newElementPosition) {\n    return (comparePositions(prevElementPositions.elementPosition, newElementPosition.elementPosition) &&\n        comparePositions(prevElementPositions.beakPosition.elementPosition, newElementPosition.beakPosition.elementPosition));\n}\n/**\n * (Utility) used in **arePositionsEqual** to compare two different elementPositions.\n *\n * @param prevElementPositions\n * @param newElementPositions\n */\nfunction comparePositions(prevElementPositions, newElementPositions) {\n    for (var key in newElementPositions) {\n        if (newElementPositions.hasOwnProperty(key)) {\n            var oldPositionEdge = prevElementPositions[key];\n            var newPositionEdge = newElementPositions[key];\n            if (oldPositionEdge !== undefined && newPositionEdge !== undefined) {\n                if (oldPositionEdge.toFixed(2) !== newPositionEdge.toFixed(2)) {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nCalloutContentBase.displayName = COMPONENT_NAME;\n//# sourceMappingURL=CalloutContent.base.js.map"],"names":["_a","COMPONENT_NAME","ANIMATIONS","RectangleEdge","AnimationClassNames","BEAK_ORIGIN_POSITION","OFF_SCREEN_STYLE","ARIA_ROLE_ATTRIBUTES","DEFAULT_PROPS","DirectionalHint","getClassNames","classNamesFunction","useBounds","targetRef","targetWindow","bounds","_b","minPagePadding","target","_c","React","targetWindowResized","setTargetWindowResized","cachedBounds","getBounds","currentBounds","getBoundsFromTargetWindow","async","useAsync","useOnEvent","useMaxHeight","positions","calloutMaxHeight","finalHeight","directionalHint","directionalHintFixed","hidden","gapSpace","beakWidth","isBeakVisible","coverTarget","maxHeight","setMaxHeight","_d","top","bottom","targetRect","getRectangleFromTarget","topBounds","bottomBounds","calculatedHeight","calculateGapSpace","usePositions","props","hostElement","calloutElement","popupRef","setPositions","positionAttempts","previousTarget","onPositioned","hideOverflow","preferScrollResizePositioning","win","useWindowEx","localRef","popupStyles","popupOverflowY","timerId_1","currentProps","__assign","dupeCalloutElement","previousPositions","isOverflowYHidden","shouldScroll","newPositions","positionCard","positionCallout","arePositionsEqual","useAutoFocus","setInitialFocus","hasPositions","timerId_2","focusFirstChild","useDismissHandlers","onDismiss","preventDismissOnScroll","preventDismissOnResize","preventDismissOnLostFocus","dismissOnTargetClick","shouldDismissOnWindowFocus","preventDismissOnEvent","isMouseDownOnPopup","mouseDownHandlers","useConst","positionsExists","dismissOnScroll","ev","dismissOnClickOrScroll","dismissOnResize","dismissOnLostFocus","eventPaths","isEventTargetOutsideCallout","elementContains","dismissOnTargetWindowBlur","disposablesPromise","resolve","disposables_1","on","dispose","CalloutContentBase","propsWithoutDefaults","forwardedRef","getPropsWithDefaults","styles","style","ariaLabel","ariaDescribedBy","ariaLabelledBy","className","children","calloutWidth","calloutMaxWidth","calloutMinWidth","doNotLayer","backgroundColor","onScroll","shouldRestoreFocus","onLayerMounted","popupProps","mergedPopupRefs","useMergedRefs","setCalloutElement","calloutCallback","calloutEl","rootRef","useTarget","_e","mouseDownOnPopup","mouseUpOnPopup","isForcedInBounds","cssPositions","overflowYHidden","beakVisible","classNames","overflowStyle","visibilityStyle","getNativeProps","divProperties","css","getBeakPosition","Popup","previousProps","nextProps","shallowCompare","beakPositionStyle","prevElementPositions","newElementPosition","comparePositions","newElementPositions","key","oldPositionEdge","newPositionEdge"],"mappings":"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","x_google_ignoreList":[0]}