{"version":3,"file":"ContextualMenuAnchor.js","sources":["../../../../../../../../node_modules/@fluentui/react/lib/components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuAnchor.js"],"sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { anchorProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues, composeComponentAs, } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\nvar ContextualMenuAnchor = /** @class */ (function (_super) {\n    __extends(ContextualMenuAnchor, _super);\n    function ContextualMenuAnchor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._anchor = React.createRef();\n        _this._getMemoizedMenuButtonKeytipProps = memoizeFunction(function (keytipProps) {\n            return __assign(__assign({}, keytipProps), { hasMenu: true });\n        });\n        _this._getSubmenuTarget = function () {\n            return _this._anchor.current ? _this._anchor.current : undefined;\n        };\n        _this._onItemClick = function (ev) {\n            var _a = _this.props, item = _a.item, onItemClick = _a.onItemClick;\n            if (onItemClick) {\n                onItemClick(item, ev);\n            }\n        };\n        _this._renderAriaDescription = function (ariaDescription, className) {\n            // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n            return ariaDescription ? (React.createElement(\"span\", { id: _this._ariaDescriptionId, className: className }, ariaDescription)) : null;\n        };\n        return _this;\n    }\n    ContextualMenuAnchor.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, item = _a.item, classNames = _a.classNames, index = _a.index, focusableElementIndex = _a.focusableElementIndex, totalItemCount = _a.totalItemCount, hasCheckmarks = _a.hasCheckmarks, hasIcons = _a.hasIcons, expandedMenuItemKey = _a.expandedMenuItemKey, onItemClick = _a.onItemClick, openSubMenu = _a.openSubMenu, dismissSubMenu = _a.dismissSubMenu, dismissMenu = _a.dismissMenu;\n        var ChildrenRenderer = ContextualMenuItem;\n        if (this.props.item.contextualMenuItemAs) {\n            ChildrenRenderer = composeComponentAs(this.props.item.contextualMenuItemAs, ChildrenRenderer);\n        }\n        if (this.props.contextualMenuItemAs) {\n            ChildrenRenderer = composeComponentAs(this.props.contextualMenuItemAs, ChildrenRenderer);\n        }\n        var anchorRel = item.rel;\n        if (item.target && item.target.toLowerCase() === '_blank') {\n            anchorRel = anchorRel ? anchorRel : 'nofollow noopener noreferrer'; // Safe default to prevent tabjacking\n        }\n        var itemHasSubmenu = hasSubmenu(item);\n        var nativeProps = getNativeProps(item, anchorProperties);\n        var disabled = isItemDisabled(item);\n        var itemProps = item.itemProps, ariaDescription = item.ariaDescription;\n        var keytipProps = item.keytipProps;\n        if (keytipProps && itemHasSubmenu) {\n            keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n        }\n        // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n        // the description in it to be added to ariaDescribedBy\n        if (ariaDescription) {\n            this._ariaDescriptionId = getId();\n        }\n        var ariaDescribedByIds = mergeAriaAttributeValues(item.ariaDescribedBy, ariaDescription ? this._ariaDescriptionId : undefined, nativeProps['aria-describedby']);\n        var additionalItemProperties = {\n            'aria-describedby': ariaDescribedByIds,\n        };\n        return (React.createElement(\"div\", null,\n            React.createElement(KeytipData, { keytipProps: item.keytipProps, ariaDescribedBy: ariaDescribedByIds, disabled: disabled }, function (keytipAttributes) { return (React.createElement(\"a\", __assign({}, additionalItemProperties, nativeProps, keytipAttributes, { ref: _this._anchor, href: item.href, target: item.target, rel: anchorRel, className: classNames.root, role: \"menuitem\", \"aria-haspopup\": itemHasSubmenu || undefined, \"aria-expanded\": itemHasSubmenu ? item.key === expandedMenuItemKey : undefined, \"aria-posinset\": focusableElementIndex + 1, \"aria-setsize\": totalItemCount, \"aria-disabled\": isItemDisabled(item), \n                // eslint-disable-next-line deprecation/deprecation\n                style: item.style, onClick: _this._onItemClick, onMouseEnter: _this._onItemMouseEnter, onMouseLeave: _this._onItemMouseLeave, onMouseMove: _this._onItemMouseMove, onKeyDown: itemHasSubmenu ? _this._onItemKeyDown : undefined }),\n                React.createElement(ChildrenRenderer, __assign({ componentRef: item.componentRef, item: item, classNames: classNames, index: index, onCheckmarkClick: hasCheckmarks && onItemClick ? onItemClick : undefined, hasIcons: hasIcons, openSubMenu: openSubMenu, dismissSubMenu: dismissSubMenu, dismissMenu: dismissMenu, getSubmenuTarget: _this._getSubmenuTarget }, itemProps)),\n                _this._renderAriaDescription(ariaDescription, classNames.screenReaderText))); })));\n    };\n    return ContextualMenuAnchor;\n}(ContextualMenuItemWrapper));\nexport { ContextualMenuAnchor };\n//# sourceMappingURL=ContextualMenuAnchor.js.map"],"names":["ContextualMenuAnchor","_super","__extends","_this","React","memoizeFunction","keytipProps","__assign","ev","_a","item","onItemClick","ariaDescription","className","classNames","index","focusableElementIndex","totalItemCount","hasCheckmarks","hasIcons","expandedMenuItemKey","openSubMenu","dismissSubMenu","dismissMenu","ChildrenRenderer","ContextualMenuItem","composeComponentAs","anchorRel","itemHasSubmenu","hasSubmenu","nativeProps","getNativeProps","anchorProperties","disabled","isItemDisabled","itemProps","getId","ariaDescribedByIds","mergeAriaAttributeValues","additionalItemProperties","KeytipData","keytipAttributes","ContextualMenuItemWrapper"],"mappings":"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","x_google_ignoreList":[0]}