{"version":3,"file":"ContextualMenu.base.js","sources":["../../../../../../../node_modules/@fluentui/react/lib/components/ContextualMenu/ContextualMenu.base.js"],"sourcesContent":["import { __assign, __rest, __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { ContextualMenuItemType } from './ContextualMenu.types';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { FocusZone, FocusZoneDirection, FocusZoneTabbableElements } from '../../FocusZone';\nimport { divProperties, getNativeProps, shallowCompare, assign, classNamesFunction, css, getFirstFocusable, getLastFocusable, getRTL, KeyCodes, shouldWrapFocus, isIOS, isMac, memoizeFunction, getPropsWithDefaults, getDocument, FocusRects, composeComponentAs, } from '../../Utilities';\nimport { hasSubmenu, getIsChecked, isItemDisabled } from '../../utilities/contextualMenu/index';\nimport { Callout } from '../../Callout';\nimport { ContextualMenuItem } from './ContextualMenuItem';\nimport { ContextualMenuSplitButton, ContextualMenuButton, ContextualMenuAnchor, } from './ContextualMenuItemWrapper/index';\nimport { concatStyleSetsWithProps } from '../../Styling';\nimport { getItemStyles } from './ContextualMenu.classNames';\nimport { useTarget, usePrevious, useAsync, useWarnings, useId, useIsomorphicLayoutEffect, } from '@fluentui/react-hooks';\nimport { useResponsiveMode, ResponsiveMode } from '../../ResponsiveMode';\nimport { MenuContext } from '../../utilities/MenuContext/index';\nvar getClassNames = classNamesFunction();\nvar getContextualMenuItemClassNames = classNamesFunction();\n// The default ContextualMenu properties have no items and beak, the default submenu direction is right and top.\nvar DEFAULT_PROPS = {\n    items: [],\n    shouldFocusOnMount: true,\n    gapSpace: 0,\n    directionalHint: DirectionalHint.bottomAutoEdge,\n    beakWidth: 16,\n};\n/* return number of menu items, excluding headers and dividers */\nfunction getItemCount(items) {\n    var totalItemCount = 0;\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n        var item = items_1[_i];\n        if (item.itemType !== ContextualMenuItemType.Divider && item.itemType !== ContextualMenuItemType.Header) {\n            var itemCount = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n            totalItemCount += itemCount;\n        }\n    }\n    return totalItemCount;\n}\nexport function getSubmenuItems(item, options) {\n    var target = options === null || options === void 0 ? void 0 : options.target;\n    // eslint-disable-next-line deprecation/deprecation\n    var items = item.subMenuProps ? item.subMenuProps.items : item.items;\n    if (items) {\n        var overrideItems = [];\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n            var subItem = items_2[_i];\n            if (subItem.preferMenuTargetAsEventTarget) {\n                // For sub-items which need an overridden target, intercept `onClick`\n                var onClick = subItem.onClick, contextItem = __rest(subItem, [\"onClick\"]);\n                overrideItems.push(__assign(__assign({}, contextItem), { onClick: getOnClickWithOverrideTarget(onClick, target) }));\n            }\n            else {\n                overrideItems.push(subItem);\n            }\n        }\n        return overrideItems;\n    }\n}\n/**\n * Returns true if a list of menu items can contain a checkbox\n */\nexport function canAnyMenuItemsCheck(items) {\n    return items.some(function (item) {\n        if (item.canCheck) {\n            return true;\n        }\n        // If the item is a section, check if any of the items in the section can check.\n        if (item.sectionProps && item.sectionProps.items.some(function (submenuItem) { return submenuItem.canCheck === true; })) {\n            return true;\n        }\n        return false;\n    });\n}\nvar NavigationIdleDelay = 250; /* ms */\nvar COMPONENT_NAME = 'ContextualMenu';\nvar _getMenuItemStylesFunction = memoizeFunction(function () {\n    var styles = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        styles[_i] = arguments[_i];\n    }\n    return function (styleProps) {\n        return concatStyleSetsWithProps.apply(void 0, __spreadArray([styleProps, getItemStyles], styles, false));\n    };\n});\n//#region Custom hooks\nfunction useVisibility(props, targetWindow) {\n    var _a = props.hidden, hidden = _a === void 0 ? false : _a, onMenuDismissed = props.onMenuDismissed, onMenuOpened = props.onMenuOpened;\n    var previousHidden = usePrevious(hidden);\n    var onMenuOpenedRef = React.useRef(onMenuOpened);\n    var onMenuClosedRef = React.useRef(onMenuDismissed);\n    var propsRef = React.useRef(props);\n    onMenuOpenedRef.current = onMenuOpened;\n    onMenuClosedRef.current = onMenuDismissed;\n    propsRef.current = props;\n    React.useEffect(function () {\n        var _a, _b;\n        // Don't issue dismissed callbacks on initial mount\n        if (hidden && previousHidden === false) {\n            (_a = onMenuClosedRef.current) === null || _a === void 0 ? void 0 : _a.call(onMenuClosedRef, propsRef.current);\n        }\n        else if (!hidden && previousHidden !== false) {\n            (_b = onMenuOpenedRef.current) === null || _b === void 0 ? void 0 : _b.call(onMenuOpenedRef, propsRef.current);\n        }\n    }, [hidden, previousHidden]);\n    // Issue onDismissedCallback on unmount\n    React.useEffect(function () { return function () { var _a; return (_a = onMenuClosedRef.current) === null || _a === void 0 ? void 0 : _a.call(onMenuClosedRef, propsRef.current); }; }, []);\n}\nfunction useSubMenuState(_a, dismiss) {\n    var hidden = _a.hidden, items = _a.items, theme = _a.theme, className = _a.className, id = _a.id, menuTarget = _a.target;\n    var _b = React.useState(), expandedMenuItemKey = _b[0], setExpandedMenuItemKey = _b[1];\n    var _c = React.useState(), submenuTarget = _c[0], setSubmenuTarget = _c[1];\n    /** True if the menu was expanded by mouse click OR hover (as opposed to by keyboard) */\n    var _d = React.useState(), shouldFocusOnContainer = _d[0], setShouldFocusOnContainer = _d[1];\n    var subMenuId = useId(COMPONENT_NAME, id);\n    var closeSubMenu = React.useCallback(function () {\n        setShouldFocusOnContainer(undefined);\n        setExpandedMenuItemKey(undefined);\n        setSubmenuTarget(undefined);\n    }, []);\n    var openSubMenu = React.useCallback(function (_a, target, focusContainer) {\n        var submenuItemKey = _a.key;\n        if (expandedMenuItemKey === submenuItemKey) {\n            return;\n        }\n        target.focus();\n        setShouldFocusOnContainer(focusContainer);\n        setExpandedMenuItemKey(submenuItemKey);\n        setSubmenuTarget(target);\n    }, [expandedMenuItemKey]);\n    React.useEffect(function () {\n        if (hidden) {\n            closeSubMenu();\n        }\n    }, [hidden, closeSubMenu]);\n    var onSubMenuDismiss = useOnSubmenuDismiss(dismiss, closeSubMenu);\n    var getSubmenuProps = function () {\n        var item = findItemByKeyFromItems(expandedMenuItemKey, items);\n        var submenuProps = null;\n        if (item) {\n            submenuProps = {\n                items: getSubmenuItems(item, { target: menuTarget }),\n                target: submenuTarget,\n                onDismiss: onSubMenuDismiss,\n                isSubMenu: true,\n                id: subMenuId,\n                shouldFocusOnMount: true,\n                shouldFocusOnContainer: shouldFocusOnContainer,\n                directionalHint: getRTL(theme) ? DirectionalHint.leftTopEdge : DirectionalHint.rightTopEdge,\n                className: className,\n                gapSpace: 0,\n                isBeakVisible: false,\n            };\n            if (item.subMenuProps) {\n                assign(submenuProps, item.subMenuProps);\n            }\n            if (item.preferMenuTargetAsEventTarget) {\n                var onItemClick = item.onItemClick;\n                submenuProps.onItemClick = getOnClickWithOverrideTarget(onItemClick, menuTarget);\n            }\n        }\n        return submenuProps;\n    };\n    return [expandedMenuItemKey, openSubMenu, getSubmenuProps, onSubMenuDismiss];\n}\nfunction useShouldUpdateFocusOnMouseMove(_a) {\n    var delayUpdateFocusOnHover = _a.delayUpdateFocusOnHover, hidden = _a.hidden;\n    var shouldUpdateFocusOnMouseEvent = React.useRef(!delayUpdateFocusOnHover);\n    var gotMouseMove = React.useRef(false);\n    React.useEffect(function () {\n        shouldUpdateFocusOnMouseEvent.current = !delayUpdateFocusOnHover;\n        gotMouseMove.current = hidden ? false : !delayUpdateFocusOnHover && gotMouseMove.current;\n    }, [delayUpdateFocusOnHover, hidden]);\n    var onMenuFocusCapture = React.useCallback(function () {\n        if (delayUpdateFocusOnHover) {\n            shouldUpdateFocusOnMouseEvent.current = false;\n        }\n    }, [delayUpdateFocusOnHover]);\n    return [shouldUpdateFocusOnMouseEvent, gotMouseMove, onMenuFocusCapture];\n}\nfunction usePreviousActiveElement(_a, targetWindow, hostElement) {\n    var hidden = _a.hidden, onRestoreFocus = _a.onRestoreFocus;\n    var previousActiveElement = React.useRef();\n    var tryFocusPreviousActiveElement = React.useCallback(function (options) {\n        var _a, _b;\n        if (onRestoreFocus) {\n            onRestoreFocus(options);\n        }\n        else if (options === null || options === void 0 ? void 0 : options.documentContainsFocus) {\n            // Make sure that the focus method actually exists\n            // In some cases the object might exist but not be a real element.\n            // This is primarily for IE 11 and should be removed once IE 11 is no longer in use.\n            (_b = (_a = previousActiveElement.current) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n    }, [onRestoreFocus]);\n    useIsomorphicLayoutEffect(function () {\n        var _a, _b;\n        if (!hidden) {\n            var newElement = targetWindow === null || targetWindow === void 0 ? void 0 : targetWindow.document.activeElement;\n            if (!((_a = hostElement.current) === null || _a === void 0 ? void 0 : _a.contains(newElement)) && newElement.tagName !== 'BODY') {\n                previousActiveElement.current = newElement;\n            }\n        }\n        else if (previousActiveElement.current) {\n            tryFocusPreviousActiveElement({\n                originalElement: previousActiveElement.current,\n                containsFocus: true,\n                documentContainsFocus: ((_b = getDocument()) === null || _b === void 0 ? void 0 : _b.hasFocus()) || false,\n            });\n            previousActiveElement.current = undefined;\n        }\n    }, [hidden, targetWindow === null || targetWindow === void 0 ? void 0 : targetWindow.document.activeElement, tryFocusPreviousActiveElement, hostElement]);\n    return [tryFocusPreviousActiveElement];\n}\nfunction useKeyHandlers(_a, dismiss, hostElement, openSubMenu) {\n    var theme = _a.theme, isSubMenu = _a.isSubMenu, _b = _a.focusZoneProps, _c = _b === void 0 ? {} : _b, checkForNoWrap = _c.checkForNoWrap, _d = _c.direction, focusZoneDirection = _d === void 0 ? FocusZoneDirection.vertical : _d;\n    /** True if the most recent keydown event was for alt (option) or meta (command). */\n    var lastKeyDownWasAltOrMeta = React.useRef();\n    /**\n     * Calls `shouldHandleKey` to determine whether the keyboard event should be handled;\n     * if so, stops event propagation and dismisses menu(s).\n     * @param ev - The keyboard event.\n     * @param shouldHandleKey - Returns whether we should handle this keyboard event.\n     * @param dismissAllMenus - If true, dismiss all menus. Otherwise, dismiss only the current menu.\n     * Only does anything if `shouldHandleKey` returns true.\n     * @returns Whether the event was handled.\n     */\n    var keyHandler = function (ev, shouldHandleKey, dismissAllMenus) {\n        var handled = false;\n        if (shouldHandleKey(ev)) {\n            dismiss(ev, dismissAllMenus);\n            ev.preventDefault();\n            ev.stopPropagation();\n            handled = true;\n        }\n        return handled;\n    };\n    /**\n     * Checks if the submenu should be closed\n     */\n    var shouldCloseSubMenu = function (ev) {\n        var submenuCloseKey = getRTL(theme) ? KeyCodes.right : KeyCodes.left;\n        // eslint-disable-next-line deprecation/deprecation\n        if (ev.which !== submenuCloseKey || !isSubMenu) {\n            return false;\n        }\n        return !!(focusZoneDirection === FocusZoneDirection.vertical ||\n            (checkForNoWrap && !shouldWrapFocus(ev.target, 'data-no-horizontal-wrap')));\n    };\n    var shouldHandleKeyDown = function (ev) {\n        return (\n        // eslint-disable-next-line deprecation/deprecation\n        ev.which === KeyCodes.escape ||\n            shouldCloseSubMenu(ev) ||\n            // eslint-disable-next-line deprecation/deprecation\n            (ev.which === KeyCodes.up && (ev.altKey || ev.metaKey)));\n    };\n    var onKeyDown = function (ev) {\n        // Take note if we are processing an alt (option) or meta (command) keydown.\n        // See comment in shouldHandleKeyUp for reasoning.\n        lastKeyDownWasAltOrMeta.current = isAltOrMeta(ev);\n        // On Mac, pressing escape dismisses all levels of native context menus\n        // eslint-disable-next-line deprecation/deprecation\n        var dismissAllMenus = ev.which === KeyCodes.escape && (isMac() || isIOS());\n        return keyHandler(ev, shouldHandleKeyDown, dismissAllMenus);\n    };\n    /**\n     * We close the menu on key up only if ALL of the following are true:\n     * - Most recent key down was alt or meta (command)\n     * - The alt/meta key down was NOT followed by some other key (such as down/up arrow to\n     *   expand/collapse the menu)\n     * - We're not on a Mac (or iOS)\n     *\n     * This is because on Windows, pressing alt moves focus to the application menu bar or similar,\n     * closing any open context menus. There is not a similar behavior on Macs.\n     */\n    var shouldHandleKeyUp = function (ev) {\n        var keyPressIsAltOrMetaAlone = lastKeyDownWasAltOrMeta.current && isAltOrMeta(ev);\n        lastKeyDownWasAltOrMeta.current = false;\n        return !!keyPressIsAltOrMetaAlone && !(isIOS() || isMac());\n    };\n    var onKeyUp = function (ev) {\n        return keyHandler(ev, shouldHandleKeyUp, true /* dismissAllMenus */);\n    };\n    var onMenuKeyDown = function (ev) {\n        // Mark as handled if onKeyDown returns true (for handling collapse cases)\n        // or if we are attempting to expand a submenu\n        var handled = onKeyDown(ev);\n        if (handled || !hostElement.current) {\n            return;\n        }\n        // If we have a modifier key being pressed, we do not want to move focus.\n        // Otherwise, handle up and down keys.\n        var hasModifier = !!(ev.altKey || ev.metaKey);\n        // eslint-disable-next-line deprecation/deprecation\n        var isUp = ev.which === KeyCodes.up;\n        // eslint-disable-next-line deprecation/deprecation\n        var isDown = ev.which === KeyCodes.down;\n        if (!hasModifier && (isUp || isDown)) {\n            var elementToFocus = isUp\n                ? getLastFocusable(hostElement.current, hostElement.current.lastChild, true)\n                : getFirstFocusable(hostElement.current, hostElement.current.firstChild, true);\n            if (elementToFocus) {\n                elementToFocus.focus();\n                ev.preventDefault();\n                ev.stopPropagation();\n            }\n        }\n    };\n    var onItemKeyDown = function (item, ev) {\n        var openKey = getRTL(theme) ? KeyCodes.left : KeyCodes.right;\n        if (!item.disabled &&\n            // eslint-disable-next-line deprecation/deprecation\n            (ev.which === openKey || ev.which === KeyCodes.enter || (ev.which === KeyCodes.down && (ev.altKey || ev.metaKey)))) {\n            openSubMenu(item, ev.currentTarget);\n            ev.preventDefault();\n        }\n    };\n    return [onKeyDown, onKeyUp, onMenuKeyDown, onItemKeyDown];\n}\nfunction useScrollHandler(asyncTracker) {\n    var isScrollIdle = React.useRef(true);\n    var scrollIdleTimeoutId = React.useRef();\n    /**\n     * Scroll handler for the callout to make sure the mouse events\n     * for updating focus are not interacting during scroll\n     */\n    var onScroll = function () {\n        if (!isScrollIdle.current && scrollIdleTimeoutId.current !== undefined) {\n            asyncTracker.clearTimeout(scrollIdleTimeoutId.current);\n            scrollIdleTimeoutId.current = undefined;\n        }\n        else {\n            isScrollIdle.current = false;\n        }\n        scrollIdleTimeoutId.current = asyncTracker.setTimeout(function () {\n            isScrollIdle.current = true;\n        }, NavigationIdleDelay);\n    };\n    return [onScroll, isScrollIdle];\n}\nfunction useOnSubmenuDismiss(dismiss, closeSubMenu) {\n    var isMountedRef = React.useRef(false);\n    React.useEffect(function () {\n        isMountedRef.current = true;\n        return function () {\n            isMountedRef.current = false;\n        };\n    }, []);\n    /**\n     * This function is called ASYNCHRONOUSLY, and so there is a chance it is called\n     * after the component is unmounted. The isMountedRef is added to prevent\n     * from calling setState() after unmount. Do NOT copy this pattern in synchronous\n     * code.\n     */\n    var onSubMenuDismiss = function (ev, dismissAll) {\n        if (dismissAll) {\n            dismiss(ev, dismissAll);\n        }\n        else if (isMountedRef.current) {\n            closeSubMenu();\n        }\n    };\n    return onSubMenuDismiss;\n}\nfunction useSubmenuEnterTimer(_a, asyncTracker) {\n    var _b = _a.subMenuHoverDelay, subMenuHoverDelay = _b === void 0 ? NavigationIdleDelay : _b;\n    var enterTimerRef = React.useRef(undefined);\n    var cancelSubMenuTimer = function () {\n        if (enterTimerRef.current !== undefined) {\n            asyncTracker.clearTimeout(enterTimerRef.current);\n            enterTimerRef.current = undefined;\n        }\n    };\n    var startSubmenuTimer = function (onTimerExpired) {\n        enterTimerRef.current = asyncTracker.setTimeout(function () {\n            onTimerExpired();\n            cancelSubMenuTimer();\n        }, subMenuHoverDelay);\n    };\n    return [cancelSubMenuTimer, startSubmenuTimer, enterTimerRef];\n}\nfunction useMouseHandlers(props, isScrollIdle, subMenuEntryTimer, targetWindow, shouldUpdateFocusOnMouseEvent, gotMouseMove, expandedMenuItemKey, hostElement, startSubmenuTimer, cancelSubMenuTimer, openSubMenu, onSubMenuDismiss, dismiss) {\n    var menuTarget = props.target;\n    var onItemMouseEnterBase = function (item, ev, target) {\n        if (shouldUpdateFocusOnMouseEvent.current) {\n            gotMouseMove.current = true;\n        }\n        if (shouldIgnoreMouseEvent()) {\n            return;\n        }\n        updateFocusOnMouseEvent(item, ev, target);\n    };\n    var onItemMouseMoveBase = function (item, ev, target) {\n        var targetElement = ev.currentTarget;\n        // Always do this check to make sure we record a mouseMove if needed (even if we are timed out)\n        if (shouldUpdateFocusOnMouseEvent.current) {\n            gotMouseMove.current = true;\n        }\n        else {\n            return;\n        }\n        if (!isScrollIdle.current ||\n            subMenuEntryTimer.current !== undefined ||\n            targetElement === (targetWindow === null || targetWindow === void 0 ? void 0 : targetWindow.document.activeElement)) {\n            return;\n        }\n        updateFocusOnMouseEvent(item, ev, target);\n    };\n    var shouldIgnoreMouseEvent = function () {\n        return !isScrollIdle.current || !gotMouseMove.current;\n    };\n    var onMouseItemLeave = function (item, ev) {\n        var _a;\n        if (shouldIgnoreMouseEvent()) {\n            return;\n        }\n        cancelSubMenuTimer();\n        if (expandedMenuItemKey !== undefined) {\n            return;\n        }\n        /**\n         * IE11 focus() method forces parents to scroll to top of element.\n         * Edge and IE expose a setActive() function for focusable divs that\n         * sets the page focus but does not scroll the parent element.\n         */\n        if (hostElement.current.setActive) {\n            try {\n                hostElement.current.setActive();\n            }\n            catch (e) {\n                /* no-op */\n            }\n        }\n        else {\n            (_a = hostElement.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    };\n    /**\n     * Handles updating focus when mouseEnter or mouseMove fire.\n     * As part of updating focus, This function will also update\n     * the expand/collapse state accordingly.\n     */\n    var updateFocusOnMouseEvent = function (item, ev, target) {\n        var targetElement = target ? target : ev.currentTarget;\n        if (item.key === expandedMenuItemKey) {\n            return;\n        }\n        cancelSubMenuTimer();\n        // If the menu is not expanded we can update focus without any delay\n        if (expandedMenuItemKey === undefined) {\n            targetElement.focus();\n        }\n        // Delay updating expanding/dismissing the submenu\n        // and only set focus if we have not already done so\n        if (hasSubmenu(item)) {\n            ev.stopPropagation();\n            startSubmenuTimer(function () {\n                targetElement.focus();\n                openSubMenu(item, targetElement, true);\n            });\n        }\n        else {\n            startSubmenuTimer(function () {\n                onSubMenuDismiss(ev);\n                targetElement.focus();\n            });\n        }\n    };\n    var onItemClick = function (item, ev) {\n        onItemClickBase(item, ev, ev.currentTarget);\n    };\n    var onItemClickBase = function (item, ev, target) {\n        var items = getSubmenuItems(item, { target: menuTarget });\n        // Cancel an async menu item hover timeout action from being taken and instead\n        // just trigger the click event instead.\n        cancelSubMenuTimer();\n        if (!hasSubmenu(item) && (!items || !items.length)) {\n            // This is an item without a menu. Click it.\n            executeItemClick(item, ev);\n        }\n        else {\n            if (item.key !== expandedMenuItemKey) {\n                // This has a collapsed sub menu. Expand it.\n                // focus on the container by default when the menu is opened with a click event\n                // this differentiates from a keyboard interaction triggering the click event\n                var shouldFocusOnContainer = typeof props.shouldFocusOnContainer === 'boolean'\n                    ? props.shouldFocusOnContainer\n                    : ev.nativeEvent.pointerType === 'mouse';\n                openSubMenu(item, target, shouldFocusOnContainer);\n            }\n        }\n        ev.stopPropagation();\n        ev.preventDefault();\n    };\n    var onAnchorClick = function (item, ev) {\n        executeItemClick(item, ev);\n        ev.stopPropagation();\n    };\n    var executeItemClick = function (item, ev) {\n        if (item.disabled || item.isDisabled) {\n            return;\n        }\n        if (item.preferMenuTargetAsEventTarget) {\n            overrideTarget(ev, menuTarget);\n        }\n        var shouldDismiss = false;\n        if (item.onClick) {\n            shouldDismiss = !!item.onClick(ev, item);\n        }\n        else if (props.onItemClick) {\n            shouldDismiss = !!props.onItemClick(ev, item);\n        }\n        if (shouldDismiss || !ev.defaultPrevented) {\n            dismiss(ev, true);\n        }\n    };\n    return [\n        onItemMouseEnterBase,\n        onItemMouseMoveBase,\n        onMouseItemLeave,\n        onItemClick,\n        onAnchorClick,\n        executeItemClick,\n        onItemClickBase,\n    ];\n}\n//#endregion\nexport var ContextualMenuBase = React.memo(React.forwardRef(function (propsWithoutDefaults, forwardedRef) {\n    var _a;\n    var _b = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults), ref = _b.ref, props = __rest(_b, [\"ref\"]);\n    var hostElement = React.useRef(null);\n    var asyncTracker = useAsync();\n    var menuId = useId(COMPONENT_NAME, props.id);\n    useWarnings({\n        name: COMPONENT_NAME,\n        props: props,\n        deprecations: {\n            getMenuClassNames: 'styles',\n        },\n    });\n    var dismiss = function (ev, dismissAll) { var _a; return (_a = props.onDismiss) === null || _a === void 0 ? void 0 : _a.call(props, ev, dismissAll); };\n    var _c = useTarget(props.target, hostElement), targetRef = _c[0], targetWindow = _c[1];\n    var tryFocusPreviousActiveElement = usePreviousActiveElement(props, targetWindow, hostElement)[0];\n    var _d = useSubMenuState(props, dismiss), expandedMenuItemKey = _d[0], openSubMenu = _d[1], getSubmenuProps = _d[2], onSubMenuDismiss = _d[3];\n    var _e = useShouldUpdateFocusOnMouseMove(props), shouldUpdateFocusOnMouseEvent = _e[0], gotMouseMove = _e[1], onMenuFocusCapture = _e[2];\n    var _f = useScrollHandler(asyncTracker), onScroll = _f[0], isScrollIdle = _f[1];\n    var _g = useSubmenuEnterTimer(props, asyncTracker), cancelSubMenuTimer = _g[0], startSubmenuTimer = _g[1], subMenuEntryTimer = _g[2];\n    var responsiveMode = useResponsiveMode(hostElement, props.responsiveMode);\n    useVisibility(props, targetWindow);\n    var _h = useKeyHandlers(props, dismiss, hostElement, openSubMenu), onKeyDown = _h[0], onKeyUp = _h[1], onMenuKeyDown = _h[2], onItemKeyDown = _h[3];\n    var _j = useMouseHandlers(props, isScrollIdle, subMenuEntryTimer, targetWindow, shouldUpdateFocusOnMouseEvent, gotMouseMove, expandedMenuItemKey, hostElement, startSubmenuTimer, cancelSubMenuTimer, openSubMenu, onSubMenuDismiss, dismiss), onItemMouseEnterBase = _j[0], onItemMouseMoveBase = _j[1], onMouseItemLeave = _j[2], onItemClick = _j[3], onAnchorClick = _j[4], executeItemClick = _j[5], onItemClickBase = _j[6];\n    //#region Render helpers\n    var onDefaultRenderMenuList = function (menuListProps, \n    // eslint-disable-next-line deprecation/deprecation\n    menuClassNames, defaultRender) {\n        var indexCorrection = 0;\n        var items = menuListProps.items, totalItemCount = menuListProps.totalItemCount, hasCheckmarks = menuListProps.hasCheckmarks, hasIcons = menuListProps.hasIcons;\n        return (React.createElement(\"ul\", { className: menuClassNames.list, onKeyDown: onKeyDown, onKeyUp: onKeyUp, role: 'presentation' }, items.map(function (item, index) {\n            var menuItem = renderMenuItem(item, index, indexCorrection, totalItemCount, hasCheckmarks, hasIcons, menuClassNames);\n            if (item.itemType !== ContextualMenuItemType.Divider && item.itemType !== ContextualMenuItemType.Header) {\n                var indexIncrease = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n                indexCorrection += indexIncrease;\n            }\n            return menuItem;\n        })));\n    };\n    var renderFocusZone = function (children, adjustedFocusZoneProps) {\n        var _a = props.focusZoneAs, ChildrenRenderer = _a === void 0 ? FocusZone : _a;\n        return React.createElement(ChildrenRenderer, __assign({}, adjustedFocusZoneProps), children);\n    };\n    /**\n     * !!!IMPORTANT!!! Avoid mutating `item: IContextualMenuItem` argument. It will\n     * cause the menu items to always re-render because the component update is based on shallow comparison.\n     */\n    var renderMenuItem = function (item, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons, \n    // eslint-disable-next-line deprecation/deprecation\n    menuClassNames) {\n        var _a;\n        var renderedItems = [];\n        var iconProps = item.iconProps || { iconName: 'None' };\n        var getItemClassNames = item.getItemClassNames, // eslint-disable-line deprecation/deprecation\n        itemProps = item.itemProps;\n        var styles = itemProps ? itemProps.styles : undefined;\n        // We only send a dividerClassName when the item to be rendered is a divider.\n        // For all other cases, the default divider style is used.\n        var dividerClassName = item.itemType === ContextualMenuItemType.Divider ? item.className : undefined;\n        var subMenuIconClassName = item.submenuIconProps ? item.submenuIconProps.className : '';\n        // eslint-disable-next-line deprecation/deprecation\n        var itemClassNames;\n        // IContextualMenuItem#getItemClassNames for backwards compatibility\n        // otherwise uses mergeStyles for class names.\n        if (getItemClassNames) {\n            itemClassNames = getItemClassNames(props.theme, isItemDisabled(item), expandedMenuItemKey === item.key, !!getIsChecked(item), !!item.href, iconProps.iconName !== 'None', item.className, dividerClassName, iconProps.className, subMenuIconClassName, item.primaryDisabled);\n        }\n        else {\n            var itemStyleProps = {\n                theme: props.theme,\n                disabled: isItemDisabled(item),\n                expanded: expandedMenuItemKey === item.key,\n                checked: !!getIsChecked(item),\n                isAnchorLink: !!item.href,\n                knownIcon: iconProps.iconName !== 'None',\n                itemClassName: item.className,\n                dividerClassName: dividerClassName,\n                iconClassName: iconProps.className,\n                subMenuClassName: subMenuIconClassName,\n                primaryDisabled: item.primaryDisabled,\n            };\n            // We need to generate default styles then override if styles are provided\n            // since the ContextualMenu currently handles item classNames.\n            itemClassNames = getContextualMenuItemClassNames(_getMenuItemStylesFunction((_a = menuClassNames.subComponentStyles) === null || _a === void 0 ? void 0 : _a.menuItem, styles), itemStyleProps);\n        }\n        // eslint-disable-next-line deprecation/deprecation\n        if (item.text === '-' || item.name === '-') {\n            item.itemType = ContextualMenuItemType.Divider;\n        }\n        switch (item.itemType) {\n            case ContextualMenuItemType.Divider:\n                renderedItems.push(renderSeparator(index, itemClassNames));\n                break;\n            case ContextualMenuItemType.Header:\n                renderedItems.push(renderSeparator(index, itemClassNames));\n                var headerItem = renderHeaderMenuItem(item, itemClassNames, menuClassNames, index, hasCheckmarks, hasIcons);\n                renderedItems.push(renderListItem(headerItem, item.key || index, itemClassNames, item.title));\n                break;\n            case ContextualMenuItemType.Section:\n                renderedItems.push(renderSectionItem(item, itemClassNames, menuClassNames, index, hasCheckmarks, hasIcons));\n                break;\n            default:\n                var defaultRenderNormalItem = function () {\n                    return renderNormalItem(item, itemClassNames, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons);\n                };\n                var menuItem = props.onRenderContextualMenuItem\n                    ? props.onRenderContextualMenuItem(item, defaultRenderNormalItem)\n                    : defaultRenderNormalItem();\n                renderedItems.push(renderListItem(menuItem, item.key || index, itemClassNames, item.title));\n                break;\n        }\n        // Since multiple nodes *could* be rendered, wrap them all in a fragment with this item's key.\n        // This ensures the reconciler handles multi-item output per-node correctly and does not re-mount content.\n        return React.createElement(React.Fragment, { key: item.key }, renderedItems);\n    };\n    var defaultMenuItemRenderer = function (item, \n    // eslint-disable-next-line deprecation/deprecation\n    menuClassNames) {\n        var index = item.index, focusableElementIndex = item.focusableElementIndex, totalItemCount = item.totalItemCount, hasCheckmarks = item.hasCheckmarks, hasIcons = item.hasIcons;\n        return renderMenuItem(item, index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons, menuClassNames);\n    };\n    var renderSectionItem = function (sectionItem, \n    // eslint-disable-next-line deprecation/deprecation\n    itemClassNames, \n    // eslint-disable-next-line deprecation/deprecation\n    menuClassNames, index, hasCheckmarks, hasIcons) {\n        var sectionProps = sectionItem.sectionProps;\n        if (!sectionProps) {\n            return;\n        }\n        var headerItem;\n        var groupProps;\n        if (sectionProps.title) {\n            var headerContextualMenuItem = undefined;\n            var ariaLabelledby = '';\n            if (typeof sectionProps.title === 'string') {\n                // Since title is a user-facing string, it needs to be stripped\n                // of whitespace in order to build a valid element ID\n                var id_1 = menuId + sectionProps.title.replace(/\\s/g, '');\n                headerContextualMenuItem = {\n                    key: \"section-\".concat(sectionProps.title, \"-title\"),\n                    itemType: ContextualMenuItemType.Header,\n                    text: sectionProps.title,\n                    id: id_1,\n                };\n                ariaLabelledby = id_1;\n            }\n            else {\n                var id_2 = sectionProps.title.id || menuId + sectionProps.title.key.replace(/\\s/g, '');\n                headerContextualMenuItem = __assign(__assign({}, sectionProps.title), { id: id_2 });\n                ariaLabelledby = id_2;\n            }\n            if (headerContextualMenuItem) {\n                groupProps = {\n                    role: 'group',\n                    'aria-labelledby': ariaLabelledby,\n                };\n                headerItem = renderHeaderMenuItem(headerContextualMenuItem, itemClassNames, menuClassNames, index, hasCheckmarks, hasIcons);\n            }\n        }\n        if (sectionProps.items && sectionProps.items.length > 0) {\n            var correctedIndex_1 = 0;\n            return (React.createElement(\"li\", { role: \"presentation\", key: sectionProps.key || sectionItem.key || \"section-\".concat(index) },\n                React.createElement(\"div\", __assign({}, groupProps),\n                    React.createElement(\"ul\", { className: menuClassNames.list, role: \"presentation\" },\n                        sectionProps.topDivider && renderSeparator(index, itemClassNames, true, true),\n                        headerItem && renderListItem(headerItem, sectionItem.key || index, itemClassNames, sectionItem.title),\n                        sectionProps.items.map(function (contextualMenuItem, itemsIndex) {\n                            var menuItem = renderMenuItem(contextualMenuItem, itemsIndex, correctedIndex_1, getItemCount(sectionProps.items), hasCheckmarks, hasIcons, menuClassNames);\n                            if (contextualMenuItem.itemType !== ContextualMenuItemType.Divider &&\n                                contextualMenuItem.itemType !== ContextualMenuItemType.Header) {\n                                var indexIncrease = contextualMenuItem.customOnRenderListLength\n                                    ? contextualMenuItem.customOnRenderListLength\n                                    : 1;\n                                correctedIndex_1 += indexIncrease;\n                            }\n                            return menuItem;\n                        }),\n                        sectionProps.bottomDivider && renderSeparator(index, itemClassNames, false, true)))));\n        }\n    };\n    var renderListItem = function (content, key, classNames, // eslint-disable-line deprecation/deprecation\n    title) {\n        return (React.createElement(\"li\", { role: \"presentation\", title: title, key: key, className: classNames.item }, content));\n    };\n    var renderSeparator = function (index, classNames, // eslint-disable-line deprecation/deprecation\n    top, fromSection) {\n        if (fromSection || index > 0) {\n            return (React.createElement(\"li\", { role: \"separator\", key: 'separator-' + index + (top === undefined ? '' : top ? '-top' : '-bottom'), className: classNames.divider, \"aria-hidden\": \"true\" }));\n        }\n        return null;\n    };\n    var renderNormalItem = function (item, classNames, // eslint-disable-line deprecation/deprecation\n    index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons) {\n        if (item.onRender) {\n            return item.onRender(__assign({ 'aria-posinset': focusableElementIndex + 1, 'aria-setsize': totalItemCount }, item), dismiss);\n        }\n        var contextualMenuItemAs = props.contextualMenuItemAs;\n        var commonProps = {\n            item: item,\n            classNames: classNames,\n            index: index,\n            focusableElementIndex: focusableElementIndex,\n            totalItemCount: totalItemCount,\n            hasCheckmarks: hasCheckmarks,\n            hasIcons: hasIcons,\n            contextualMenuItemAs: contextualMenuItemAs,\n            onItemMouseEnter: onItemMouseEnterBase,\n            onItemMouseLeave: onMouseItemLeave,\n            onItemMouseMove: onItemMouseMoveBase,\n            onItemMouseDown: onItemMouseDown,\n            executeItemClick: executeItemClick,\n            onItemKeyDown: onItemKeyDown,\n            expandedMenuItemKey: expandedMenuItemKey,\n            openSubMenu: openSubMenu,\n            dismissSubMenu: onSubMenuDismiss,\n            dismissMenu: dismiss,\n        };\n        if (item.href) {\n            var ContextualMenuAnchorAs = ContextualMenuAnchor;\n            if (item.contextualMenuItemWrapperAs) {\n                ContextualMenuAnchorAs = composeComponentAs(item.contextualMenuItemWrapperAs, ContextualMenuAnchorAs);\n            }\n            return React.createElement(ContextualMenuAnchorAs, __assign({}, commonProps, { onItemClick: onAnchorClick }));\n        }\n        if (item.split && hasSubmenu(item)) {\n            var ContextualMenuSplitButtonAs = ContextualMenuSplitButton;\n            if (item.contextualMenuItemWrapperAs) {\n                ContextualMenuSplitButtonAs = composeComponentAs(item.contextualMenuItemWrapperAs, ContextualMenuSplitButtonAs);\n            }\n            return (React.createElement(ContextualMenuSplitButtonAs, __assign({}, commonProps, { onItemClick: onItemClick, onItemClickBase: onItemClickBase, onTap: cancelSubMenuTimer })));\n        }\n        var ContextualMenuButtonAs = ContextualMenuButton;\n        if (item.contextualMenuItemWrapperAs) {\n            ContextualMenuButtonAs = composeComponentAs(item.contextualMenuItemWrapperAs, ContextualMenuButtonAs);\n        }\n        return React.createElement(ContextualMenuButtonAs, __assign({}, commonProps, { onItemClick: onItemClick, onItemClickBase: onItemClickBase }));\n    };\n    var renderHeaderMenuItem = function (item, \n    // eslint-disable-next-line deprecation/deprecation\n    itemClassNames, \n    // eslint-disable-next-line deprecation/deprecation\n    menuClassNames, index, hasCheckmarks, hasIcons) {\n        var ChildrenRenderer = ContextualMenuItem;\n        if (item.contextualMenuItemAs) {\n            ChildrenRenderer = composeComponentAs(item.contextualMenuItemAs, ChildrenRenderer);\n        }\n        if (props.contextualMenuItemAs) {\n            ChildrenRenderer = composeComponentAs(props.contextualMenuItemAs, ChildrenRenderer);\n        }\n        var itemProps = item.itemProps, id = item.id;\n        var divHtmlProperties = itemProps && getNativeProps(itemProps, divProperties);\n        return (\n        // eslint-disable-next-line deprecation/deprecation\n        React.createElement(\"div\", __assign({ id: id, className: menuClassNames.header }, divHtmlProperties, { style: item.style }),\n            React.createElement(ChildrenRenderer, __assign({ item: item, classNames: itemClassNames, index: index, onCheckmarkClick: hasCheckmarks ? onItemClick : undefined, hasIcons: hasIcons }, itemProps))));\n    };\n    //#endregion\n    //#region Main render\n    var isBeakVisible = props.isBeakVisible;\n    var items = props.items, labelElementId = props.labelElementId, id = props.id, className = props.className, beakWidth = props.beakWidth, directionalHint = props.directionalHint, directionalHintForRTL = props.directionalHintForRTL, alignTargetEdge = props.alignTargetEdge, gapSpace = props.gapSpace, coverTarget = props.coverTarget, ariaLabel = props.ariaLabel, doNotLayer = props.doNotLayer, target = props.target, bounds = props.bounds, useTargetWidth = props.useTargetWidth, useTargetAsMinWidth = props.useTargetAsMinWidth, directionalHintFixed = props.directionalHintFixed, shouldFocusOnMount = props.shouldFocusOnMount, shouldFocusOnContainer = props.shouldFocusOnContainer, title = props.title, styles = props.styles, theme = props.theme, calloutProps = props.calloutProps, _k = props.onRenderSubMenu, onRenderSubMenu = _k === void 0 ? onDefaultRenderSubMenu : _k, _l = props.onRenderMenuList, onRenderMenuList = _l === void 0 ? function (menuListProps, defaultRender) { return onDefaultRenderMenuList(menuListProps, classNames, defaultRender); } : _l, focusZoneProps = props.focusZoneProps, \n    // eslint-disable-next-line deprecation/deprecation\n    getMenuClassNames = props.getMenuClassNames;\n    var classNames = getMenuClassNames\n        ? getMenuClassNames(theme, className)\n        : getClassNames(styles, {\n            theme: theme,\n            className: className,\n        });\n    var hasIcons = itemsHaveIcons(items);\n    function itemsHaveIcons(contextualMenuItems) {\n        for (var _i = 0, contextualMenuItems_1 = contextualMenuItems; _i < contextualMenuItems_1.length; _i++) {\n            var item = contextualMenuItems_1[_i];\n            if (item.iconProps) {\n                return true;\n            }\n            if (item.itemType === ContextualMenuItemType.Section &&\n                item.sectionProps &&\n                itemsHaveIcons(item.sectionProps.items)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    var adjustedFocusZoneProps = __assign(__assign({ direction: FocusZoneDirection.vertical, handleTabKey: FocusZoneTabbableElements.all, isCircularNavigation: true, 'data-tabster': '{\"uncontrolled\": {}, \"focusable\": { \"excludeFromMover\": true }}' }, focusZoneProps), { className: css(classNames.root, (_a = props.focusZoneProps) === null || _a === void 0 ? void 0 : _a.className) });\n    var hasCheckmarks = canAnyMenuItemsCheck(items);\n    var submenuProps = expandedMenuItemKey && props.hidden !== true ? getSubmenuProps() : null;\n    isBeakVisible = isBeakVisible === undefined ? responsiveMode <= ResponsiveMode.medium : isBeakVisible;\n    /**\n     * When useTargetWidth is true, get the width of the target element and apply it for the context menu container\n     */\n    var contextMenuStyle;\n    var targetAsHtmlElement = targetRef.current;\n    if ((useTargetWidth || useTargetAsMinWidth) && targetAsHtmlElement && targetAsHtmlElement.offsetWidth) {\n        var targetBoundingRect = targetAsHtmlElement.getBoundingClientRect();\n        var targetWidth = targetBoundingRect.width - 2; /* Accounts for 1px border */\n        if (useTargetWidth) {\n            contextMenuStyle = {\n                width: targetWidth,\n            };\n        }\n        else if (useTargetAsMinWidth) {\n            contextMenuStyle = {\n                minWidth: targetWidth,\n            };\n        }\n    }\n    // The menu should only return if items were provided, if no items were provided then it should not appear.\n    if (items && items.length > 0) {\n        var totalItemCount_1 = getItemCount(items);\n        var calloutStyles_1 = classNames.subComponentStyles\n            ? classNames.subComponentStyles.callout\n            : undefined;\n        return (React.createElement(MenuContext.Consumer, null, function (menuContext) { return (React.createElement(Callout, __assign({ styles: calloutStyles_1, onRestoreFocus: tryFocusPreviousActiveElement }, calloutProps, { target: target || menuContext.target, isBeakVisible: isBeakVisible, beakWidth: beakWidth, directionalHint: directionalHint, directionalHintForRTL: directionalHintForRTL, gapSpace: gapSpace, coverTarget: coverTarget, doNotLayer: doNotLayer, className: css('ms-ContextualMenu-Callout', calloutProps && calloutProps.className), setInitialFocus: shouldFocusOnMount, onDismiss: props.onDismiss || menuContext.onDismiss, onScroll: onScroll, bounds: bounds, directionalHintFixed: directionalHintFixed, alignTargetEdge: alignTargetEdge, hidden: props.hidden || menuContext.hidden, ref: forwardedRef }),\n            React.createElement(\"div\", { style: contextMenuStyle, ref: hostElement, id: id, className: classNames.container, tabIndex: shouldFocusOnContainer ? 0 : -1, onKeyDown: onMenuKeyDown, onKeyUp: onKeyUp, onFocusCapture: onMenuFocusCapture, \"aria-label\": ariaLabel, \"aria-labelledby\": labelElementId, role: 'menu' },\n                title && React.createElement(\"div\", { className: classNames.title },\n                    \" \",\n                    title,\n                    \" \"),\n                items && items.length\n                    ? renderFocusZone(onRenderMenuList({\n                        ariaLabel: ariaLabel,\n                        items: items,\n                        totalItemCount: totalItemCount_1,\n                        hasCheckmarks: hasCheckmarks,\n                        hasIcons: hasIcons,\n                        defaultMenuItemRenderer: function (item) {\n                            return defaultMenuItemRenderer(item, classNames);\n                        },\n                        labelElementId: labelElementId,\n                    }, function (menuListProps, defaultRender) { return onDefaultRenderMenuList(menuListProps, classNames, defaultRender); }), adjustedFocusZoneProps)\n                    : null,\n                submenuProps && onRenderSubMenu(submenuProps, onDefaultRenderSubMenu)),\n            React.createElement(FocusRects, null))); }));\n    }\n    else {\n        return null;\n    }\n    //#endregion\n}), function (prevProps, newProps) {\n    if (!newProps.shouldUpdateWhenHidden && prevProps.hidden && newProps.hidden) {\n        // Do not update when hidden.\n        return true;\n    }\n    return shallowCompare(prevProps, newProps);\n});\nContextualMenuBase.displayName = 'ContextualMenuBase';\n/**\n * Returns true if the key for the event is alt (Mac option) or meta (Mac command).\n */\nfunction isAltOrMeta(ev) {\n    // eslint-disable-next-line deprecation/deprecation\n    return ev.which === KeyCodes.alt || ev.key === 'Meta';\n}\nfunction onItemMouseDown(item, ev) {\n    var _a;\n    (_a = item.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(item, item, ev);\n}\nfunction onDefaultRenderSubMenu(subMenuProps, defaultRender) {\n    throw Error('ContextualMenuBase: onRenderSubMenu callback is null or undefined. ' +\n        'Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.');\n}\n/**\n * Returns the item that matches a given key if any.\n * @param key - The key of the item to match\n * @param items - The items to look for the key\n */\nfunction findItemByKeyFromItems(key, items) {\n    for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n        var item = items_3[_i];\n        if (item.itemType === ContextualMenuItemType.Section && item.sectionProps) {\n            var match = findItemByKeyFromItems(key, item.sectionProps.items);\n            if (match) {\n                return match;\n            }\n        }\n        else if (item.key && item.key === key) {\n            return item;\n        }\n    }\n}\nfunction getOnClickWithOverrideTarget(onClick, target) {\n    return onClick\n        ? function (ev, item) {\n            overrideTarget(ev, target);\n            return onClick(ev, item);\n        }\n        : onClick;\n}\nfunction overrideTarget(ev, target) {\n    if (ev && target) {\n        ev.persist();\n        if (target instanceof Event) {\n            ev.target = target.target;\n        }\n        else if (target instanceof Element) {\n            ev.target = target;\n        }\n    }\n}\n//# sourceMappingURL=ContextualMenu.base.js.map"],"names":["getClassNames","classNamesFunction","getContextualMenuItemClassNames","DEFAULT_PROPS","DirectionalHint","getItemCount","items","totalItemCount","_i","items_1","item","ContextualMenuItemType","itemCount","getSubmenuItems","options","target","overrideItems","items_2","subItem","onClick","contextItem","__rest","__assign","getOnClickWithOverrideTarget","canAnyMenuItemsCheck","submenuItem","NavigationIdleDelay","COMPONENT_NAME","_getMenuItemStylesFunction","memoizeFunction","styles","styleProps","concatStyleSetsWithProps","__spreadArray","getItemStyles","useVisibility","props","targetWindow","_a","hidden","onMenuDismissed","onMenuOpened","previousHidden","usePrevious","onMenuOpenedRef","React","onMenuClosedRef","propsRef","_b","useSubMenuState","dismiss","theme","className","id","menuTarget","expandedMenuItemKey","setExpandedMenuItemKey","_c","submenuTarget","setSubmenuTarget","_d","shouldFocusOnContainer","setShouldFocusOnContainer","subMenuId","useId","closeSubMenu","openSubMenu","focusContainer","submenuItemKey","onSubMenuDismiss","useOnSubmenuDismiss","getSubmenuProps","findItemByKeyFromItems","submenuProps","getRTL","assign","onItemClick","useShouldUpdateFocusOnMouseMove","delayUpdateFocusOnHover","shouldUpdateFocusOnMouseEvent","gotMouseMove","onMenuFocusCapture","usePreviousActiveElement","hostElement","onRestoreFocus","previousActiveElement","tryFocusPreviousActiveElement","useIsomorphicLayoutEffect","getDocument","newElement","useKeyHandlers","isSubMenu","checkForNoWrap","focusZoneDirection","FocusZoneDirection","lastKeyDownWasAltOrMeta","keyHandler","ev","shouldHandleKey","dismissAllMenus","handled","shouldCloseSubMenu","submenuCloseKey","KeyCodes","shouldWrapFocus","shouldHandleKeyDown","onKeyDown","isAltOrMeta","isMac","isIOS","shouldHandleKeyUp","keyPressIsAltOrMetaAlone","onKeyUp","onMenuKeyDown","hasModifier","isUp","isDown","elementToFocus","getLastFocusable","getFirstFocusable","onItemKeyDown","openKey","useScrollHandler","asyncTracker","isScrollIdle","scrollIdleTimeoutId","onScroll","isMountedRef","dismissAll","useSubmenuEnterTimer","subMenuHoverDelay","enterTimerRef","cancelSubMenuTimer","startSubmenuTimer","onTimerExpired","useMouseHandlers","subMenuEntryTimer","onItemMouseEnterBase","shouldIgnoreMouseEvent","updateFocusOnMouseEvent","onItemMouseMoveBase","targetElement","onMouseItemLeave","hasSubmenu","onItemClickBase","executeItemClick","onAnchorClick","overrideTarget","shouldDismiss","ContextualMenuBase","propsWithoutDefaults","forwardedRef","getPropsWithDefaults","useAsync","menuId","useWarnings","useTarget","targetRef","_e","_f","_g","responsiveMode","useResponsiveMode","_h","_j","onDefaultRenderMenuList","menuListProps","menuClassNames","defaultRender","indexCorrection","hasCheckmarks","hasIcons","index","menuItem","renderMenuItem","indexIncrease","renderFocusZone","children","adjustedFocusZoneProps","ChildrenRenderer","FocusZone","focusableElementIndex","renderedItems","iconProps","getItemClassNames","itemProps","dividerClassName","subMenuIconClassName","itemClassNames","isItemDisabled","getIsChecked","itemStyleProps","renderSeparator","headerItem","renderHeaderMenuItem","renderListItem","renderSectionItem","defaultRenderNormalItem","renderNormalItem","defaultMenuItemRenderer","sectionItem","sectionProps","groupProps","headerContextualMenuItem","ariaLabelledby","id_1","id_2","correctedIndex_1","contextualMenuItem","itemsIndex","content","key","classNames","title","top","fromSection","contextualMenuItemAs","commonProps","onItemMouseDown","ContextualMenuAnchorAs","ContextualMenuAnchor","composeComponentAs","ContextualMenuSplitButtonAs","ContextualMenuSplitButton","ContextualMenuButtonAs","ContextualMenuButton","ContextualMenuItem","divHtmlProperties","getNativeProps","divProperties","isBeakVisible","labelElementId","beakWidth","directionalHint","directionalHintForRTL","alignTargetEdge","gapSpace","coverTarget","ariaLabel","doNotLayer","bounds","useTargetWidth","useTargetAsMinWidth","directionalHintFixed","shouldFocusOnMount","calloutProps","_k","onRenderSubMenu","onDefaultRenderSubMenu","_l","onRenderMenuList","focusZoneProps","getMenuClassNames","itemsHaveIcons","contextualMenuItems","contextualMenuItems_1","FocusZoneTabbableElements","css","ResponsiveMode","contextMenuStyle","targetAsHtmlElement","targetBoundingRect","targetWidth","totalItemCount_1","calloutStyles_1","MenuContext","menuContext","Callout","FocusRects","prevProps","newProps","shallowCompare","subMenuProps","items_3","match"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAIA,KAAgB,gBAAAC,GAAkB,GAClCC,KAAkC,gBAAAD,GAAkB,GAEpDE,KAAgB;AAAA,EAChB,OAAO,CAAE;AAAA,EACT,oBAAoB;AAAA,EACpB,UAAU;AAAA,EACV,iBAAiBC,GAAgB;AAAA,EACjC,WAAW;AACf;AAEA,SAASC,GAAaC,GAAO;AAEzB,WADIC,IAAiB,GACZC,IAAK,GAAGC,IAAUH,GAAOE,IAAKC,EAAQ,QAAQD,KAAM;AACzD,QAAIE,IAAOD,EAAQD,CAAE;AACrB,QAAIE,EAAK,aAAaC,EAAuB,WAAWD,EAAK,aAAaC,EAAuB,QAAQ;AACrG,UAAIC,IAAYF,EAAK,2BAA2BA,EAAK,2BAA2B;AAChF,MAAAH,KAAkBK;AAAA,IACrB;AAAA,EACJ;AACD,SAAOL;AACX;AACO,SAASM,GAAgBH,GAAMI,GAAS;AAC3C,MAAIC,IAASD,KAAY,OAA6B,SAASA,EAAQ,QAEnER,IAAQI,EAAK,eAAeA,EAAK,aAAa,QAAQA,EAAK;AAC/D,MAAIJ,GAAO;AAEP,aADIU,IAAgB,CAAA,GACXR,IAAK,GAAGS,IAAUX,GAAOE,IAAKS,EAAQ,QAAQT,KAAM;AACzD,UAAIU,IAAUD,EAAQT,CAAE;AACxB,UAAIU,EAAQ,+BAA+B;AAEvC,YAAIC,IAAUD,EAAQ,SAASE,IAAcC,GAAOH,GAAS,CAAC,SAAS,CAAC;AACxE,QAAAF,EAAc,KAAKM,EAASA,EAAS,CAAE,GAAEF,CAAW,GAAG,EAAE,SAASG,GAA6BJ,GAASJ,CAAM,EAAC,CAAE,CAAC;AAAA,MACrH;AAEG,QAAAC,EAAc,KAAKE,CAAO;AAAA,IAEjC;AACD,WAAOF;AAAA,EACV;AACL;AAIO,SAASQ,GAAqBlB,GAAO;AACxC,SAAOA,EAAM,KAAK,SAAUI,GAAM;AAK9B,WAJI,GAAAA,EAAK,YAILA,EAAK,gBAAgBA,EAAK,aAAa,MAAM,KAAK,SAAUe,GAAa;AAAE,aAAOA,EAAY,aAAa;AAAA,IAAO,CAAA;AAAA,EAI9H,CAAK;AACL;AACA,IAAIC,KAAsB,KACtBC,KAAiB,kBACjBC,KAA6B,gBAAAC,GAAgB,WAAY;AAEzD,WADIC,IAAS,CAAA,GACJtB,IAAK,GAAGA,IAAK,UAAU,QAAQA;AACpC,IAAAsB,EAAOtB,CAAE,IAAI,UAAUA,CAAE;AAE7B,SAAO,SAAUuB,GAAY;AACzB,WAAOC,GAAyB,MAAM,QAAQC,GAAc,CAACF,GAAYG,EAAa,GAAGJ,GAAQ,EAAK,CAAC;AAAA,EAC/G;AACA,CAAC;AAED,SAASK,GAAcC,GAAOC,GAAc;AACxC,MAAIC,IAAKF,EAAM,QAAQG,IAASD,MAAO,SAAS,KAAQA,GAAIE,IAAkBJ,EAAM,iBAAiBK,IAAeL,EAAM,cACtHM,IAAiBC,GAAYJ,CAAM,GACnCK,IAAkBC,EAAM,OAAOJ,CAAY,GAC3CK,IAAkBD,EAAM,OAAOL,CAAe,GAC9CO,IAAWF,EAAM,OAAOT,CAAK;AACjC,EAAAQ,EAAgB,UAAUH,GAC1BK,EAAgB,UAAUN,GAC1BO,EAAS,UAAUX,GACnBS,EAAM,UAAU,WAAY;AACxB,QAAIP,GAAIU;AAER,IAAIT,KAAUG,MAAmB,MAC5BJ,IAAKQ,EAAgB,aAAa,QAAQR,MAAO,UAAkBA,EAAG,KAAKQ,GAAiBC,EAAS,OAAO,IAExG,CAACR,KAAUG,MAAmB,QAClCM,IAAKJ,EAAgB,aAAa,QAAQI,MAAO,UAAkBA,EAAG,KAAKJ,GAAiBG,EAAS,OAAO;AAAA,EAEzH,GAAO,CAACR,GAAQG,CAAc,CAAC,GAE3BG,EAAM,UAAU,WAAY;AAAE,WAAO,WAAY;AAAE,UAAIP;AAAI,cAAQA,IAAKQ,EAAgB,aAAa,QAAQR,MAAO,SAAS,SAASA,EAAG,KAAKQ,GAAiBC,EAAS,OAAO;AAAA,IAAE;AAAA,EAAK,GAAE,CAAE,CAAA;AAC9L;AACA,SAASE,GAAgBX,GAAIY,GAAS;AAClC,MAAIX,IAASD,EAAG,QAAQhC,IAAQgC,EAAG,OAAOa,IAAQb,EAAG,OAAOc,IAAYd,EAAG,WAAWe,IAAKf,EAAG,IAAIgB,IAAahB,EAAG,QAC9GU,IAAKH,EAAM,SAAQ,GAAIU,IAAsBP,EAAG,CAAC,GAAGQ,IAAyBR,EAAG,CAAC,GACjFS,IAAKZ,EAAM,SAAQ,GAAIa,IAAgBD,EAAG,CAAC,GAAGE,IAAmBF,EAAG,CAAC,GAErEG,IAAKf,EAAM,SAAQ,GAAIgB,IAAyBD,EAAG,CAAC,GAAGE,IAA4BF,EAAG,CAAC,GACvFG,IAAYC,GAAMrC,IAAgB0B,CAAE,GACpCY,IAAepB,EAAM,YAAY,WAAY;AAC7C,IAAAiB,EAA0B,MAAS,GACnCN,EAAuB,MAAS,GAChCG,EAAiB,MAAS;AAAA,EAC7B,GAAE,CAAE,CAAA,GACDO,IAAcrB,EAAM,YAAY,SAAUP,GAAIvB,GAAQoD,GAAgB;AACtE,QAAIC,IAAiB9B,EAAG;AACxB,IAAIiB,MAAwBa,MAG5BrD,EAAO,MAAK,GACZ+C,EAA0BK,CAAc,GACxCX,EAAuBY,CAAc,GACrCT,EAAiB5C,CAAM;AAAA,EAC/B,GAAO,CAACwC,CAAmB,CAAC;AACxB,EAAAV,EAAM,UAAU,WAAY;AACxB,IAAIN,KACA0B;EAEZ,GAAO,CAAC1B,GAAQ0B,CAAY,CAAC;AACzB,MAAII,IAAmBC,GAAoBpB,GAASe,CAAY,GAC5DM,IAAkB,WAAY;AAC9B,QAAI7D,IAAO8D,GAAuBjB,GAAqBjD,CAAK,GACxDmE,IAAe;AACnB,QAAI/D,MACA+D,IAAe;AAAA,MACX,OAAO5D,GAAgBH,GAAM,EAAE,QAAQ4C,EAAU,CAAE;AAAA,MACnD,QAAQI;AAAA,MACR,WAAWW;AAAA,MACX,WAAW;AAAA,MACX,IAAIN;AAAA,MACJ,oBAAoB;AAAA,MACpB,wBAAwBF;AAAA,MACxB,iBAAiBa,GAAOvB,CAAK,IAAI/C,GAAgB,cAAcA,GAAgB;AAAA,MAC/E,WAAWgD;AAAA,MACX,UAAU;AAAA,MACV,eAAe;AAAA,IAC/B,GACgB1C,EAAK,gBACLiE,GAAOF,GAAc/D,EAAK,YAAY,GAEtCA,EAAK,gCAA+B;AACpC,UAAIkE,IAAclE,EAAK;AACvB,MAAA+D,EAAa,cAAclD,GAA6BqD,GAAatB,CAAU;AAAA,IAClF;AAEL,WAAOmB;AAAA,EACf;AACI,SAAO,CAAClB,GAAqBW,GAAaK,GAAiBF,CAAgB;AAC/E;AACA,SAASQ,GAAgCvC,GAAI;AACzC,MAAIwC,IAA0BxC,EAAG,yBAAyBC,IAASD,EAAG,QAClEyC,IAAgClC,EAAM,OAAO,CAACiC,CAAuB,GACrEE,IAAenC,EAAM,OAAO,EAAK;AACrC,EAAAA,EAAM,UAAU,WAAY;AACxB,IAAAkC,EAA8B,UAAU,CAACD,GACzCE,EAAa,UAAUzC,IAAS,KAAQ,CAACuC,KAA2BE,EAAa;AAAA,EACzF,GAAO,CAACF,GAAyBvC,CAAM,CAAC;AACpC,MAAI0C,IAAqBpC,EAAM,YAAY,WAAY;AACnD,IAAIiC,MACAC,EAA8B,UAAU;AAAA,EAEpD,GAAO,CAACD,CAAuB,CAAC;AAC5B,SAAO,CAACC,GAA+BC,GAAcC,CAAkB;AAC3E;AACA,SAASC,GAAyB5C,GAAID,GAAc8C,GAAa;AAC7D,MAAI5C,IAASD,EAAG,QAAQ8C,IAAiB9C,EAAG,gBACxC+C,IAAwBxC,EAAM,UAC9ByC,IAAgCzC,EAAM,YAAY,SAAU/B,GAAS;AACrE,QAAIwB,GAAIU;AACR,IAAIoC,IACAA,EAAetE,CAAO,IAEjBA,KAAY,QAAsCA,EAAQ,2BAI9DkC,KAAMV,IAAK+C,EAAsB,aAAa,QAAQ/C,MAAO,SAAS,SAASA,EAAG,WAAW,QAAQU,MAAO,UAAkBA,EAAG,KAAKV,CAAE;AAAA,EAErJ,GAAO,CAAC8C,CAAc,CAAC;AACnB,SAAAG,GAA0B,WAAY;AAClC,QAAIjD,GAAIU;AACR,QAAKT;AAMA,MAAI8C,EAAsB,YAC3BC,EAA8B;AAAA,QAC1B,iBAAiBD,EAAsB;AAAA,QACvC,eAAe;AAAA,QACf,yBAAyBrC,IAAKwC,GAAW,OAAQ,QAAQxC,MAAO,SAAS,SAASA,EAAG,SAAU,MAAK;AAAA,MACpH,CAAa,GACDqC,EAAsB,UAAU;AAAA,SAZvB;AACT,UAAII,IAAapD,KAAiB,OAAkC,SAASA,EAAa,SAAS;AACnG,MAAI,EAAG,GAAAC,IAAK6C,EAAY,aAAa,QAAQ7C,MAAO,WAAkBA,EAAG,SAASmD,CAAU,MAAMA,EAAW,YAAY,WACrHJ,EAAsB,UAAUI;AAAA,IAEvC;AAAA,EASJ,GAAE,CAAClD,GAAQF,KAAiB,OAAkC,SAASA,EAAa,SAAS,eAAeiD,GAA+BH,CAAW,CAAC,GACjJ,CAACG,CAA6B;AACzC;AACA,SAASI,GAAepD,GAAIY,GAASiC,GAAajB,GAAa;AAC3D,MAAIf,IAAQb,EAAG,OAAOqD,IAAYrD,EAAG,WAAWU,IAAKV,EAAG,gBAAgBmB,IAAKT,MAAO,SAAS,CAAA,IAAKA,GAAI4C,IAAiBnC,EAAG,gBAAgBG,IAAKH,EAAG,WAAWoC,IAAqBjC,MAAO,SAASkC,GAAmB,WAAWlC,GAE5NmC,IAA0BlD,EAAM,UAUhCmD,IAAa,SAAUC,GAAIC,GAAiBC,GAAiB;AAC7D,QAAIC,IAAU;AACd,WAAIF,EAAgBD,CAAE,MAClB/C,EAAQ+C,GAAIE,CAAe,GAC3BF,EAAG,eAAc,GACjBA,EAAG,gBAAe,GAClBG,IAAU,KAEPA;AAAA,EACf,GAIQC,IAAqB,SAAUJ,GAAI;AACnC,QAAIK,IAAkB5B,GAAOvB,CAAK,IAAIoD,EAAS,QAAQA,EAAS;AAEhE,WAAIN,EAAG,UAAUK,KAAmB,CAACX,IAC1B,KAEJ,CAAC,EAAEE,MAAuBC,GAAmB,YAC/CF,KAAkB,CAACY,GAAgBP,EAAG,QAAQ,yBAAyB;AAAA,EACpF,GACQQ,IAAsB,SAAUR,GAAI;AACpC;AAAA;AAAA,MAEAA,EAAG,UAAUM,EAAS,UAClBF,EAAmBJ,CAAE;AAAA,MAEpBA,EAAG,UAAUM,EAAS,OAAON,EAAG,UAAUA,EAAG;AAAA;AAAA,EAC1D,GACQS,IAAY,SAAUT,GAAI;AAG1B,IAAAF,EAAwB,UAAUY,GAAYV,CAAE;AAGhD,QAAIE,IAAkBF,EAAG,UAAUM,EAAS,WAAWK,GAAK,KAAMC,GAAK;AACvE,WAAOb,EAAWC,GAAIQ,GAAqBN,CAAe;AAAA,EAClE,GAWQW,IAAoB,SAAUb,GAAI;AAClC,QAAIc,IAA2BhB,EAAwB,WAAWY,GAAYV,CAAE;AAChF,WAAAF,EAAwB,UAAU,IAC3B,CAAC,CAACgB,KAA4B,EAAEF,GAAK,KAAMD,GAAO;AAAA,EACjE,GACQI,IAAU,SAAUf,GAAI;AACxB,WAAOD;AAAA,MAAWC;AAAA,MAAIa;AAAA,MAAmB;AAAA;AAAA,IAAI;AAAA,EACrD,GACQG,IAAgB,SAAUhB,GAAI;AAG9B,QAAIG,IAAUM,EAAUT,CAAE;AAC1B,QAAI,EAAAG,KAAW,CAACjB,EAAY,UAK5B;AAAA,UAAI+B,IAAc,CAAC,EAAEjB,EAAG,UAAUA,EAAG,UAEjCkB,IAAOlB,EAAG,UAAUM,EAAS,IAE7Ba,IAASnB,EAAG,UAAUM,EAAS;AACnC,UAAI,CAACW,MAAgBC,KAAQC,IAAS;AAClC,YAAIC,IAAiBF,IACfG,GAAiBnC,EAAY,SAASA,EAAY,QAAQ,WAAW,EAAI,IACzEoC,GAAkBpC,EAAY,SAASA,EAAY,QAAQ,YAAY,EAAI;AACjF,QAAIkC,MACAA,EAAe,MAAK,GACpBpB,EAAG,eAAc,GACjBA,EAAG,gBAAe;AAAA,MAEzB;AAAA;AAAA,EACT,GACQuB,IAAgB,SAAU9G,GAAMuF,GAAI;AACpC,QAAIwB,IAAU/C,GAAOvB,CAAK,IAAIoD,EAAS,OAAOA,EAAS;AACvD,IAAI,CAAC7F,EAAK;AAAA,KAELuF,EAAG,UAAUwB,KAAWxB,EAAG,UAAUM,EAAS,SAAUN,EAAG,UAAUM,EAAS,SAASN,EAAG,UAAUA,EAAG,cACxG/B,EAAYxD,GAAMuF,EAAG,aAAa,GAClCA,EAAG,eAAc;AAAA,EAE7B;AACI,SAAO,CAACS,GAAWM,GAASC,GAAeO,CAAa;AAC5D;AACA,SAASE,GAAiBC,GAAc;AACpC,MAAIC,IAAe/E,EAAM,OAAO,EAAI,GAChCgF,IAAsBhF,EAAM,UAK5BiF,IAAW,WAAY;AACvB,IAAI,CAACF,EAAa,WAAWC,EAAoB,YAAY,UACzDF,EAAa,aAAaE,EAAoB,OAAO,GACrDA,EAAoB,UAAU,UAG9BD,EAAa,UAAU,IAE3BC,EAAoB,UAAUF,EAAa,WAAW,WAAY;AAC9D,MAAAC,EAAa,UAAU;AAAA,IAC1B,GAAElG,EAAmB;AAAA,EAC9B;AACI,SAAO,CAACoG,GAAUF,CAAY;AAClC;AACA,SAAStD,GAAoBpB,GAASe,GAAc;AAChD,MAAI8D,IAAelF,EAAM,OAAO,EAAK;AACrC,EAAAA,EAAM,UAAU,WAAY;AACxB,WAAAkF,EAAa,UAAU,IAChB,WAAY;AACf,MAAAA,EAAa,UAAU;AAAA,IACnC;AAAA,EACK,GAAE,CAAE,CAAA;AAOL,MAAI1D,IAAmB,SAAU4B,GAAI+B,GAAY;AAC7C,IAAIA,IACA9E,EAAQ+C,GAAI+B,CAAU,IAEjBD,EAAa,WAClB9D;EAEZ;AACI,SAAOI;AACX;AACA,SAAS4D,GAAqB3F,GAAIqF,GAAc;AAC5C,MAAI3E,IAAKV,EAAG,mBAAmB4F,IAAoBlF,MAAO,SAAStB,KAAsBsB,GACrFmF,IAAgBtF,EAAM,OAAO,MAAS,GACtCuF,IAAqB,WAAY;AACjC,IAAID,EAAc,YAAY,WAC1BR,EAAa,aAAaQ,EAAc,OAAO,GAC/CA,EAAc,UAAU;AAAA,EAEpC,GACQE,IAAoB,SAAUC,GAAgB;AAC9C,IAAAH,EAAc,UAAUR,EAAa,WAAW,WAAY;AACxD,MAAAW,KACAF;IACH,GAAEF,CAAiB;AAAA,EAC5B;AACI,SAAO,CAACE,GAAoBC,GAAmBF,CAAa;AAChE;AACA,SAASI,GAAiBnG,GAAOwF,GAAcY,GAAmBnG,GAAc0C,GAA+BC,GAAczB,GAAqB4B,GAAakD,GAAmBD,GAAoBlE,GAAaG,GAAkBnB,GAAS;AAC1O,MAAII,IAAalB,EAAM,QACnBqG,IAAuB,SAAU/H,GAAMuF,GAAIlF,GAAQ;AAInD,IAHIgE,EAA8B,YAC9BC,EAAa,UAAU,KAEvB,CAAA0D,EAAsB,KAG1BC,EAAwBjI,GAAMuF,GAAIlF,CAAM;AAAA,EAChD,GACQ6H,IAAsB,SAAUlI,GAAMuF,GAAIlF,GAAQ;AAClD,QAAI8H,IAAgB5C,EAAG;AAEvB,QAAIlB,EAA8B;AAC9B,MAAAC,EAAa,UAAU;AAAA;AAGvB;AAEJ,IAAI,CAAC4C,EAAa,WACdY,EAAkB,YAAY,UAC9BK,OAAmBxG,KAAiB,OAAkC,SAASA,EAAa,SAAS,kBAGzGsG,EAAwBjI,GAAMuF,GAAIlF,CAAM;AAAA,EAChD,GACQ2H,IAAyB,WAAY;AACrC,WAAO,CAACd,EAAa,WAAW,CAAC5C,EAAa;AAAA,EACtD,GACQ8D,IAAmB,SAAUpI,GAAMuF,GAAI;AACvC,QAAI3D;AACJ,QAAI,CAAAoG,EAAsB,MAG1BN,KACI7E,MAAwB;AAQ5B,UAAI4B,EAAY,QAAQ;AACpB,YAAI;AACA,UAAAA,EAAY,QAAQ;QACvB,QACS;AAAA,QAET;AAAA;AAGD,SAAC7C,IAAK6C,EAAY,aAAa,QAAQ7C,MAAO,UAAkBA,EAAG,MAAK;AAAA,EAEpF,GAMQqG,IAA0B,SAAUjI,GAAMuF,GAAIlF,GAAQ;AACtD,QAAI8H,IAAgB9H,KAAkBkF,EAAG;AACzC,IAAIvF,EAAK,QAAQ6C,MAGjB6E,KAEI7E,MAAwB,UACxBsF,EAAc,MAAK,GAInBE,GAAWrI,CAAI,KACfuF,EAAG,gBAAe,GAClBoC,EAAkB,WAAY;AAC1B,MAAAQ,EAAc,MAAK,GACnB3E,EAAYxD,GAAMmI,GAAe,EAAI;AAAA,IACrD,CAAa,KAGDR,EAAkB,WAAY;AAC1B,MAAAhE,EAAiB4B,CAAE,GACnB4C,EAAc,MAAK;AAAA,IACnC,CAAa;AAAA,EAEb,GACQjE,IAAc,SAAUlE,GAAMuF,GAAI;AAClC,IAAA+C,EAAgBtI,GAAMuF,GAAIA,EAAG,aAAa;AAAA,EAClD,GACQ+C,IAAkB,SAAUtI,GAAMuF,GAAIlF,GAAQ;AAC9C,QAAIT,IAAQO,GAAgBH,GAAM,EAAE,QAAQ4C,EAAU,CAAE;AAIxD,QADA8E,KACI,CAACW,GAAWrI,CAAI,MAAM,CAACJ,KAAS,CAACA,EAAM;AAEvC,MAAA2I,EAAiBvI,GAAMuF,CAAE;AAAA,aAGrBvF,EAAK,QAAQ6C,GAAqB;AAIlC,UAAIM,KAAyB,OAAOzB,EAAM,0BAA2B,YAC/DA,EAAM,yBACN6D,EAAG,YAAY,gBAAgB;AACrC,MAAA/B,EAAYxD,GAAMK,GAAQ8C,EAAsB;AAAA,IACnD;AAEL,IAAAoC,EAAG,gBAAe,GAClBA,EAAG,eAAc;AAAA,EACzB,GACQiD,IAAgB,SAAUxI,GAAMuF,GAAI;AACpC,IAAAgD,EAAiBvI,GAAMuF,CAAE,GACzBA,EAAG,gBAAe;AAAA,EAC1B,GACQgD,IAAmB,SAAUvI,GAAMuF,GAAI;AACvC,QAAI,EAAAvF,EAAK,YAAYA,EAAK,aAG1B;AAAA,MAAIA,EAAK,iCACLyI,GAAelD,GAAI3C,CAAU;AAEjC,UAAI8F,IAAgB;AACpB,MAAI1I,EAAK,UACL0I,IAAgB,CAAC,CAAC1I,EAAK,QAAQuF,GAAIvF,CAAI,IAElC0B,EAAM,gBACXgH,IAAgB,CAAC,CAAChH,EAAM,YAAY6D,GAAIvF,CAAI,KAE5C0I,KAAiB,CAACnD,EAAG,qBACrB/C,EAAQ+C,GAAI,EAAI;AAAA;AAAA,EAE5B;AACI,SAAO;AAAA,IACHwC;AAAA,IACAG;AAAA,IACAE;AAAA,IACAlE;AAAA,IACAsE;AAAA,IACAD;AAAA,IACAD;AAAA,EACR;AACA;AAEU,IAACK,KAAqB,gBAAAxG,EAAM,KAAKA,EAAM,WAAW,SAAUyG,GAAsBC,GAAc;AACtG,MAAIjH,GACAU,IAAKwG,GAAqBrJ,IAAemJ,CAAoB;AAAS,EAAAtG,EAAG;AAAK,MAAAZ,IAAQf,GAAO2B,GAAI,CAAC,KAAK,CAAC,GACxGmC,IAActC,EAAM,OAAO,IAAI,GAC/B8E,IAAe8B,MACfC,IAAS1F,GAAMrC,IAAgBS,EAAM,EAAE;AAC3C,EAAAuH,GAAY;AAAA,IACR,MAAMhI;AAAA,IACN,OAAOS;AAAA,IACP,cAAc;AAAA,MACV,mBAAmB;AAAA,IACtB;AAAA,EACT,CAAK;AACD,MAAIc,IAAU,SAAU+C,GAAI+B,GAAY;AAAE,QAAI1F;AAAI,YAAQA,IAAKF,EAAM,eAAe,QAAQE,MAAO,SAAS,SAASA,EAAG,KAAKF,GAAO6D,GAAI+B,CAAU;AAAA,KAC9IvE,IAAKmG,GAAUxH,EAAM,QAAQ+C,CAAW,GAAG0E,IAAYpG,EAAG,CAAC,GAAGpB,IAAeoB,EAAG,CAAC,GACjF6B,IAAgCJ,GAAyB9C,GAAOC,GAAc8C,CAAW,EAAE,CAAC,GAC5FvB,IAAKX,GAAgBb,GAAOc,CAAO,GAAGK,IAAsBK,EAAG,CAAC,GAAGM,IAAcN,EAAG,CAAC,GAAGW,IAAkBX,EAAG,CAAC,GAAGS,IAAmBT,EAAG,CAAC,GACxIkG,IAAKjF,GAAgCzC,CAAK,GAAG2C,IAAgC+E,EAAG,CAAC,GAAG9E,IAAe8E,EAAG,CAAC,GAAG7E,IAAqB6E,EAAG,CAAC,GACnIC,IAAKrC,GAAiBC,CAAY,GAAGG,IAAWiC,EAAG,CAAC,GAAGnC,IAAemC,EAAG,CAAC,GAC1EC,IAAK/B,GAAqB7F,GAAOuF,CAAY,GAAGS,IAAqB4B,EAAG,CAAC,GAAG3B,KAAoB2B,EAAG,CAAC,GAAGxB,KAAoBwB,EAAG,CAAC,GAC/HC,KAAiBC,GAAkB/E,GAAa/C,EAAM,cAAc;AACxE,EAAAD,GAAcC,CAAmB;AACjC,MAAI+H,IAAKzE,GAAetD,GAAOc,GAASiC,GAAajB,CAAW,GAAGwC,KAAYyD,EAAG,CAAC,GAAGnD,KAAUmD,EAAG,CAAC,GAAGlD,KAAgBkD,EAAG,CAAC,GAAG3C,KAAgB2C,EAAG,CAAC,GAC9IC,IAAK7B,GAAiBnG,GAAOwF,GAAcY,IAAmBnG,GAAc0C,GAA+BC,GAAczB,GAAqB4B,GAAakD,IAAmBD,GAAoBlE,GAAaG,GAAkBnB,CAAO,GAAGuF,KAAuB2B,EAAG,CAAC,GAAGxB,KAAsBwB,EAAG,CAAC,GAAGtB,KAAmBsB,EAAG,CAAC,GAAGxF,KAAcwF,EAAG,CAAC,GAAGlB,KAAgBkB,EAAG,CAAC,GAAGnB,KAAmBmB,EAAG,CAAC,GAAGpB,KAAkBoB,EAAG,CAAC,GAE5ZC,KAA0B,SAAUC,GAExCC,GAAgBC,GAAe;AAC3B,QAAIC,IAAkB,GAClBnK,IAAQgK,EAAc,OAAO/J,IAAiB+J,EAAc,gBAAgBI,IAAgBJ,EAAc,eAAeK,IAAWL,EAAc;AACtJ,WAAQzH,EAAM,cAAc,MAAM,EAAE,WAAW0H,EAAe,MAAM,WAAW7D,IAAW,SAASM,IAAS,MAAM,eAAgB,GAAE1G,EAAM,IAAI,SAAUI,GAAMkK,GAAO;AACjK,UAAIC,IAAWC,GAAepK,GAAMkK,GAAOH,GAAiBlK,GAAgBmK,GAAeC,GAAUJ,CAAc;AACnH,UAAI7J,EAAK,aAAaC,EAAuB,WAAWD,EAAK,aAAaC,EAAuB,QAAQ;AACrG,YAAIoK,IAAgBrK,EAAK,2BAA2BA,EAAK,2BAA2B;AACpF,QAAA+J,KAAmBM;AAAA,MACtB;AACD,aAAOF;AAAA,IACV,CAAA,CAAC;AAAA,EACV,GACQG,KAAkB,SAAUC,GAAUC,GAAwB;AAC9D,QAAI5I,IAAKF,EAAM,aAAa+I,IAAmB7I,MAAO,SAAS8I,KAAY9I;AAC3E,WAAOO,EAAM,cAAcsI,GAAkB7J,EAAS,CAAA,GAAI4J,CAAsB,GAAGD,CAAQ;AAAA,EACnG,GAKQH,KAAiB,SAAUpK,GAAMkK,GAAOS,GAAuB9K,GAAgBmK,GAAeC,GAElGJ,GAAgB;AACZ,QAAIjI,GACAgJ,IAAgB,CAAA,GAChBC,IAAY7K,EAAK,aAAa,EAAE,UAAU,OAAM,GAChD8K,IAAoB9K,EAAK,mBAC7B+K,IAAY/K,EAAK,WACboB,IAAS2J,IAAYA,EAAU,SAAS,QAGxCC,IAAmBhL,EAAK,aAAaC,EAAuB,UAAUD,EAAK,YAAY,QACvFiL,IAAuBjL,EAAK,mBAAmBA,EAAK,iBAAiB,YAAY,IAEjFkL;AAGJ,QAAIJ;AACA,MAAAI,IAAiBJ,EAAkBpJ,EAAM,OAAOyJ,GAAenL,CAAI,GAAG6C,MAAwB7C,EAAK,KAAK,CAAC,CAACoL,GAAapL,CAAI,GAAG,CAAC,CAACA,EAAK,MAAM6K,EAAU,aAAa,QAAQ7K,EAAK,WAAWgL,GAAkBH,EAAU,WAAWI,GAAsBjL,EAAK,eAAe;AAAA,SAE1Q;AACD,UAAIqL,KAAiB;AAAA,QACjB,OAAO3J,EAAM;AAAA,QACb,UAAUyJ,GAAenL,CAAI;AAAA,QAC7B,UAAU6C,MAAwB7C,EAAK;AAAA,QACvC,SAAS,CAAC,CAACoL,GAAapL,CAAI;AAAA,QAC5B,cAAc,CAAC,CAACA,EAAK;AAAA,QACrB,WAAW6K,EAAU,aAAa;AAAA,QAClC,eAAe7K,EAAK;AAAA,QACpB,kBAAkBgL;AAAA,QAClB,eAAeH,EAAU;AAAA,QACzB,kBAAkBI;AAAA,QAClB,iBAAiBjL,EAAK;AAAA,MACtC;AAGY,MAAAkL,IAAiB1L,GAAgC0B,IAA4BU,IAAKiI,EAAe,wBAAwB,QAAQjI,MAAO,SAAS,SAASA,EAAG,UAAUR,CAAM,GAAGiK,EAAc;AAAA,IACjM;AAKD,aAHIrL,EAAK,SAAS,OAAOA,EAAK,SAAS,SACnCA,EAAK,WAAWC,EAAuB,UAEnCD,EAAK,UAAQ;AAAA,MACjB,KAAKC,EAAuB;AACxB,QAAA2K,EAAc,KAAKU,EAAgBpB,GAAOgB,CAAc,CAAC;AACzD;AAAA,MACJ,KAAKjL,EAAuB;AACxB,QAAA2K,EAAc,KAAKU,EAAgBpB,GAAOgB,CAAc,CAAC;AACzD,YAAIK,KAAaC,GAAqBxL,GAAMkL,GAAgBrB,GAAgBK,GAAOF,GAAeC,CAAQ;AAC1G,QAAAW,EAAc,KAAKa,GAAeF,IAAYvL,EAAK,OAAOkK,GAAOgB,GAAgBlL,EAAK,KAAK,CAAC;AAC5F;AAAA,MACJ,KAAKC,EAAuB;AACxB,QAAA2K,EAAc,KAAKc,GAAkB1L,GAAMkL,GAAgBrB,GAAgBK,GAAOF,GAAeC,CAAQ,CAAC;AAC1G;AAAA,MACJ;AACI,YAAI0B,KAA0B,WAAY;AACtC,iBAAOC,GAAiB5L,GAAMkL,GAAgBhB,GAAOS,GAAuB9K,GAAgBmK,GAAeC,CAAQ;AAAA,QACvI,GACoBE,KAAWzI,EAAM,6BACfA,EAAM,2BAA2B1B,GAAM2L,EAAuB,IAC9DA;AACN,QAAAf,EAAc,KAAKa,GAAetB,IAAUnK,EAAK,OAAOkK,GAAOgB,GAAgBlL,EAAK,KAAK,CAAC;AAC1F;AAAA,IACP;AAGD,WAAOmC,EAAM,cAAcA,EAAM,UAAU,EAAE,KAAKnC,EAAK,OAAO4K,CAAa;AAAA,EACnF,GACQiB,KAA0B,SAAU7L,GAExC6J,GAAgB;AACZ,QAAIK,IAAQlK,EAAK,OAAO2K,IAAwB3K,EAAK,uBAAuBH,IAAiBG,EAAK,gBAAgBgK,IAAgBhK,EAAK,eAAeiK,IAAWjK,EAAK;AACtK,WAAOoK,GAAepK,GAAMkK,GAAOS,GAAuB9K,GAAgBmK,GAAeC,GAAUJ,CAAc;AAAA,EACzH,GACQ6B,KAAoB,SAAUI,GAElCZ,GAEArB,GAAgBK,GAAOF,GAAeC,GAAU;AAC5C,QAAI8B,IAAeD,EAAY;AAC/B,QAAKC,GAGL;AAAA,UAAIR,GACAS;AACJ,UAAID,EAAa,OAAO;AACpB,YAAIE,IAA2B,QAC3BC,IAAiB;AACrB,YAAI,OAAOH,EAAa,SAAU,UAAU;AAGxC,cAAII,IAAOnD,IAAS+C,EAAa,MAAM,QAAQ,OAAO,EAAE;AACxD,UAAAE,IAA2B;AAAA,YACvB,KAAK,WAAW,OAAOF,EAAa,OAAO,QAAQ;AAAA,YACnD,UAAU9L,EAAuB;AAAA,YACjC,MAAM8L,EAAa;AAAA,YACnB,IAAII;AAAA,UACxB,GACgBD,IAAiBC;AAAA,QACpB,OACI;AACD,cAAIC,IAAOL,EAAa,MAAM,MAAM/C,IAAS+C,EAAa,MAAM,IAAI,QAAQ,OAAO,EAAE;AACrF,UAAAE,IAA2BrL,EAASA,EAAS,IAAImL,EAAa,KAAK,GAAG,EAAE,IAAIK,EAAI,CAAE,GAClFF,IAAiBE;AAAA,QACpB;AACD,QAAIH,MACAD,IAAa;AAAA,UACT,MAAM;AAAA,UACN,mBAAmBE;AAAA,QACvC,GACgBX,IAAaC,GAAqBS,GAA0Bf,GAAgBrB,GAAgBK,GAAOF,GAAeC,CAAQ;AAAA,MAEjI;AACD,UAAI8B,EAAa,SAASA,EAAa,MAAM,SAAS,GAAG;AACrD,YAAIM,IAAmB;AACvB,eAAQlK,EAAM;AAAA,UAAc;AAAA,UAAM,EAAE,MAAM,gBAAgB,KAAK4J,EAAa,OAAOD,EAAY,OAAO,WAAW,OAAO5B,CAAK,EAAG;AAAA,UAC5H/H,EAAM;AAAA,YAAc;AAAA,YAAOvB,EAAS,CAAA,GAAIoL,CAAU;AAAA,YAC9C7J,EAAM;AAAA,cAAc;AAAA,cAAM,EAAE,WAAW0H,EAAe,MAAM,MAAM,eAAgB;AAAA,cAC9EkC,EAAa,cAAcT,EAAgBpB,GAAOgB,GAAgB,IAAM,EAAI;AAAA,cAC5EK,KAAcE,GAAeF,GAAYO,EAAY,OAAO5B,GAAOgB,GAAgBY,EAAY,KAAK;AAAA,cACpGC,EAAa,MAAM,IAAI,SAAUO,GAAoBC,GAAY;AAC7D,oBAAIpC,KAAWC,GAAekC,GAAoBC,GAAYF,GAAkB1M,GAAaoM,EAAa,KAAK,GAAG/B,GAAeC,GAAUJ,CAAc;AACzJ,oBAAIyC,EAAmB,aAAarM,EAAuB,WACvDqM,EAAmB,aAAarM,EAAuB,QAAQ;AAC/D,sBAAIoK,KAAgBiC,EAAmB,2BACjCA,EAAmB,2BACnB;AACN,kBAAAD,KAAoBhC;AAAA,gBACvB;AACD,uBAAOF;AAAA,cACnC,CAAyB;AAAA,cACD4B,EAAa,iBAAiBT,EAAgBpB,GAAOgB,GAAgB,IAAO,EAAI;AAAA,YAAC;AAAA,UAAC;AAAA,QAAC;AAAA,MAClG;AAAA;AAAA,EACT,GACQO,KAAiB,SAAUe,GAASC,GAAKC,GAC7CC,GAAO;AACH,WAAQxK,EAAM,cAAc,MAAM,EAAE,MAAM,gBAAgB,OAAOwK,GAAO,KAAKF,GAAK,WAAWC,EAAW,KAAI,GAAIF,CAAO;AAAA,EAC/H,GACQlB,IAAkB,SAAUpB,GAAOwC,GACvCE,GAAKC,GAAa;AACd,WAAIA,KAAe3C,IAAQ,IACf/H,EAAM,cAAc,MAAM,EAAE,MAAM,aAAa,KAAK,eAAe+H,KAAS0C,MAAQ,SAAY,KAAKA,IAAM,SAAS,YAAY,WAAWF,EAAW,SAAS,eAAe,OAAM,CAAE,IAE3L;AAAA,EACf,GACQd,KAAmB,SAAU5L,GAAM0M,GACvCxC,GAAOS,GAAuB9K,GAAgBmK,GAAeC,GAAU;AACnE,QAAIjK,EAAK;AACL,aAAOA,EAAK,SAASY,EAAS,EAAE,iBAAiB+J,IAAwB,GAAG,gBAAgB9K,EAAgB,GAAEG,CAAI,GAAGwC,CAAO;AAEhI,QAAIsK,IAAuBpL,EAAM,sBAC7BqL,IAAc;AAAA,MACd,MAAM/M;AAAA,MACN,YAAY0M;AAAA,MACZ,OAAOxC;AAAA,MACP,uBAAuBS;AAAA,MACvB,gBAAgB9K;AAAA,MAChB,eAAemK;AAAA,MACf,UAAUC;AAAA,MACV,sBAAsB6C;AAAA,MACtB,kBAAkB/E;AAAA,MAClB,kBAAkBK;AAAA,MAClB,iBAAiBF;AAAA,MACjB,iBAAiB8E;AAAA,MACjB,kBAAkBzE;AAAA,MAClB,eAAezB;AAAA,MACf,qBAAqBjE;AAAA,MACrB,aAAaW;AAAA,MACb,gBAAgBG;AAAA,MAChB,aAAanB;AAAA,IACzB;AACQ,QAAIxC,EAAK,MAAM;AACX,UAAIiN,IAAyBC;AAC7B,aAAIlN,EAAK,gCACLiN,IAAyBE,EAAmBnN,EAAK,6BAA6BiN,CAAsB,IAEjG9K,EAAM,cAAc8K,GAAwBrM,EAAS,CAAA,GAAImM,GAAa,EAAE,aAAavE,GAAe,CAAA,CAAC;AAAA,IAC/G;AACD,QAAIxI,EAAK,SAASqI,GAAWrI,CAAI,GAAG;AAChC,UAAIoN,IAA8BC;AAClC,aAAIrN,EAAK,gCACLoN,IAA8BD,EAAmBnN,EAAK,6BAA6BoN,CAA2B,IAE1GjL,EAAM,cAAciL,GAA6BxM,EAAS,CAAA,GAAImM,GAAa,EAAE,aAAa7I,IAAa,iBAAiBoE,IAAiB,OAAOZ,EAAkB,CAAE,CAAC;AAAA,IAChL;AACD,QAAI4F,IAAyBC;AAC7B,WAAIvN,EAAK,gCACLsN,IAAyBH,EAAmBnN,EAAK,6BAA6BsN,CAAsB,IAEjGnL,EAAM,cAAcmL,GAAwB1M,EAAS,CAAA,GAAImM,GAAa,EAAE,aAAa7I,IAAa,iBAAiBoE,GAAe,CAAE,CAAC;AAAA,EACpJ,GACQkD,KAAuB,SAAUxL,GAErCkL,GAEArB,GAAgBK,GAAOF,GAAeC,GAAU;AAC5C,QAAIQ,IAAmB+C;AACvB,IAAIxN,EAAK,yBACLyK,IAAmB0C,EAAmBnN,EAAK,sBAAsByK,CAAgB,IAEjF/I,EAAM,yBACN+I,IAAmB0C,EAAmBzL,EAAM,sBAAsB+I,CAAgB;AAEtF,QAAIM,IAAY/K,EAAK,WAAW2C,IAAK3C,EAAK,IACtCyN,IAAoB1C,KAAa2C,GAAe3C,GAAW4C,EAAa;AAC5E;AAAA;AAAA,MAEAxL,EAAM;AAAA,QAAc;AAAA,QAAOvB,EAAS,EAAE,IAAI+B,GAAI,WAAWkH,EAAe,OAAQ,GAAE4D,GAAmB,EAAE,OAAOzN,EAAK,OAAO;AAAA,QACtHmC,EAAM,cAAcsI,GAAkB7J,EAAS,EAAE,MAAMZ,GAAM,YAAYkL,GAAgB,OAAOhB,GAAO,kBAAkBF,IAAgB9F,KAAc,QAAW,UAAU+F,EAAU,GAAEc,CAAS,CAAC;AAAA,MAAC;AAAA;AAAA,EAC/M,GAGQ6C,IAAgBlM,EAAM,eACtB9B,IAAQ8B,EAAM,OAAOmM,KAAiBnM,EAAM,gBAAgBiB,KAAKjB,EAAM,IAAIgB,KAAYhB,EAAM,WAAWoM,KAAYpM,EAAM,WAAWqM,KAAkBrM,EAAM,iBAAiBsM,KAAwBtM,EAAM,uBAAuBuM,KAAkBvM,EAAM,iBAAiBwM,KAAWxM,EAAM,UAAUyM,KAAczM,EAAM,aAAa0M,KAAY1M,EAAM,WAAW2M,KAAa3M,EAAM,YAAYrB,KAASqB,EAAM,QAAQ4M,KAAS5M,EAAM,QAAQ6M,KAAiB7M,EAAM,gBAAgB8M,KAAsB9M,EAAM,qBAAqB+M,KAAuB/M,EAAM,sBAAsBgN,KAAqBhN,EAAM,oBAAoByB,KAAyBzB,EAAM,wBAAwBiL,KAAQjL,EAAM,OAAON,KAASM,EAAM,QAAQe,KAAQf,EAAM,OAAOiN,KAAejN,EAAM,cAAckN,KAAKlN,EAAM,iBAAiBmN,KAAkBD,OAAO,SAASE,KAAyBF,IAAIG,KAAKrN,EAAM,kBAAkBsN,KAAmBD,OAAO,SAAS,SAAUnF,GAAeE,GAAe;AAAE,WAAOH,GAAwBC,GAAe8C,CAAyB;AAAA,MAAOqC,IAAIE,KAAiBvN,EAAM,gBAEzjCwN,KAAoBxN,EAAM,mBACtBgL,IAAawC,KACXA,GAAkBzM,IAAOC,EAAS,IAClCpD,GAAc8B,IAAQ;AAAA,IACpB,OAAOqB;AAAA,IACP,WAAWC;AAAA,EACvB,CAAS,GACDuH,KAAWkF,GAAevP,CAAK;AACnC,WAASuP,GAAeC,GAAqB;AACzC,aAAStP,IAAK,GAAGuP,IAAwBD,GAAqBtP,IAAKuP,EAAsB,QAAQvP,KAAM;AACnG,UAAIE,IAAOqP,EAAsBvP,CAAE;AAInC,UAHIE,EAAK,aAGLA,EAAK,aAAaC,EAAuB,WACzCD,EAAK,gBACLmP,GAAenP,EAAK,aAAa,KAAK;AACtC,eAAO;AAAA,IAEd;AACD,WAAO;AAAA,EACV;AACD,MAAIwK,KAAyB5J,EAASA,EAAS,EAAE,WAAWwE,GAAmB,UAAU,cAAckK,GAA0B,KAAK,sBAAsB,IAAM,gBAAgB,kEAAmE,GAAEL,EAAc,GAAG,EAAE,WAAWM,GAAI7C,EAAW,OAAO9K,IAAKF,EAAM,oBAAoB,QAAQE,MAAO,SAAS,SAASA,EAAG,SAAS,EAAC,CAAE,GACtXoI,KAAgBlJ,GAAqBlB,CAAK,GAC1CmE,KAAelB,KAAuBnB,EAAM,WAAW,KAAOmC,EAAiB,IAAG;AACtF,EAAA+J,IAAgBA,MAAkB,SAAYrE,MAAkBiG,GAAe,SAAS5B;AAIxF,MAAI6B,IACAC,KAAsBvG,EAAU;AACpC,OAAKoF,MAAkBC,OAAwBkB,MAAuBA,GAAoB,aAAa;AACnG,QAAIC,KAAqBD,GAAoB,yBACzCE,KAAcD,GAAmB,QAAQ;AAC7C,IAAIpB,KACAkB,KAAmB;AAAA,MACf,OAAOG;AAAA,IACvB,IAEiBpB,OACLiB,KAAmB;AAAA,MACf,UAAUG;AAAA,IAC1B;AAAA,EAEK;AAED,MAAIhQ,KAASA,EAAM,SAAS,GAAG;AAC3B,QAAIiQ,KAAmBlQ,GAAaC,CAAK,GACrCkQ,KAAkBpD,EAAW,qBAC3BA,EAAW,mBAAmB,UAC9B;AACN,WAAQvK,EAAM,cAAc4N,GAAY,UAAU,MAAM,SAAUC,GAAa;AAAE,aAAQ7N,EAAM;AAAA,QAAc8N;AAAA,QAASrP,EAAS,EAAE,QAAQkP,IAAiB,gBAAgBlL,EAA6B,GAAI+J,IAAc,EAAE,QAAQtO,MAAU2P,EAAY,QAAQ,eAAepC,GAAe,WAAWE,IAAW,iBAAiBC,IAAiB,uBAAuBC,IAAuB,UAAUE,IAAU,aAAaC,IAAa,YAAYE,IAAY,WAAWkB,GAAI,6BAA6BZ,MAAgBA,GAAa,SAAS,GAAG,iBAAiBD,IAAoB,WAAWhN,EAAM,aAAasO,EAAY,WAAW,UAAU5I,GAAU,QAAQkH,IAAQ,sBAAsBG,IAAsB,iBAAiBR,IAAiB,QAAQvM,EAAM,UAAUsO,EAAY,QAAQ,KAAKnH,GAAc;AAAA,QACvyB1G,EAAM;AAAA,UAAc;AAAA,UAAO,EAAE,OAAOsN,IAAkB,KAAKhL,GAAa,IAAI9B,IAAI,WAAW+J,EAAW,WAAW,UAAUvJ,KAAyB,IAAI,IAAI,WAAWoD,IAAe,SAASD,IAAS,gBAAgB/B,GAAoB,cAAc6J,IAAW,mBAAmBP,IAAgB,MAAM,OAAQ;AAAA,UAClTlB,MAASxK,EAAM;AAAA,YAAc;AAAA,YAAO,EAAE,WAAWuK,EAAW,MAAO;AAAA,YAC/D;AAAA,YACAC;AAAA,YACA;AAAA,UAAG;AAAA,UACP/M,KAASA,EAAM,SACT0K,GAAgB0E,GAAiB;AAAA,YAC/B,WAAWZ;AAAA,YACX,OAAOxO;AAAA,YACP,gBAAgBiQ;AAAA,YAChB,eAAe7F;AAAA,YACf,UAAUC;AAAA,YACV,yBAAyB,SAAUjK,GAAM;AACrC,qBAAO6L,GAAwB7L,GAAM0M,CAAU;AAAA,YAClD;AAAA,YACD,gBAAgBmB;AAAA,UACxC,GAAuB,SAAUjE,GAAeE,GAAe;AAAE,mBAAOH,GAAwBC,GAAe8C,CAAyB;AAAA,WAAI,GAAGlC,EAAsB,IAC/I;AAAA,UACNzG,MAAgB8K,GAAgB9K,IAAc+K,EAAsB;AAAA,QAAC;AAAA,QACzE3M,EAAM,cAAc+N,IAAY,IAAI;AAAA,MAAC;AAAA,IAAK,CAAA;AAAA,EACjD;AAEG,WAAO;AAGf,CAAC,GAAG,SAAUC,GAAWC,GAAU;AAC/B,SAAI,CAACA,EAAS,0BAA0BD,EAAU,UAAUC,EAAS,SAE1D,KAEJC,GAAeF,GAAWC,CAAQ;AAC7C,CAAC;AACDzH,GAAmB,cAAc;AAIjC,SAAS1C,GAAYV,GAAI;AAErB,SAAOA,EAAG,UAAUM,EAAS,OAAON,EAAG,QAAQ;AACnD;AACA,SAASyH,GAAgBhN,GAAMuF,GAAI;AAC/B,MAAI3D;AACJ,GAACA,IAAK5B,EAAK,iBAAiB,QAAQ4B,MAAO,UAAkBA,EAAG,KAAK5B,GAAMA,GAAMuF,CAAE;AACvF;AACA,SAASuJ,GAAuBwB,GAAcxG,GAAe;AACzD,QAAM,MAAM,6JACkF;AAClG;AAMA,SAAShG,GAAuB2I,GAAK7M,GAAO;AACxC,WAASE,IAAK,GAAGyQ,IAAU3Q,GAAOE,IAAKyQ,EAAQ,QAAQzQ,KAAM;AACzD,QAAIE,IAAOuQ,EAAQzQ,CAAE;AACrB,QAAIE,EAAK,aAAaC,EAAuB,WAAWD,EAAK,cAAc;AACvE,UAAIwQ,IAAQ1M,GAAuB2I,GAAKzM,EAAK,aAAa,KAAK;AAC/D,UAAIwQ;AACA,eAAOA;AAAA,IAEd,WACQxQ,EAAK,OAAOA,EAAK,QAAQyM;AAC9B,aAAOzM;AAAA,EAEd;AACL;AACA,SAASa,GAA6BJ,GAASJ,GAAQ;AACnD,SAAOI,KACD,SAAU8E,GAAIvF,GAAM;AAClB,WAAAyI,GAAelD,GAAIlF,CAAM,GAClBI,EAAQ8E,GAAIvF,CAAI;AAAA,EAC1B;AAET;AACA,SAASyI,GAAelD,GAAIlF,GAAQ;AAChC,EAAIkF,KAAMlF,MACNkF,EAAG,QAAO,GACNlF,aAAkB,QAClBkF,EAAG,SAASlF,EAAO,SAEdA,aAAkB,YACvBkF,EAAG,SAASlF;AAGxB;","x_google_ignoreList":[0]}